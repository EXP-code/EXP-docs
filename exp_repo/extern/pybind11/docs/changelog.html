<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog &mdash; EXP 0.172 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=9c6809b7"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../_static/copybutton.js?v=5eb1bb1e"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            EXP
              <img src="../../../../_static/exp_logo_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                7.x
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/overview.html">EXP at a glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/install.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/tutorial.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXP concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/bfetheory.html">BFE theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/codeintro.html">Code intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/timesseries.html">BFE time series analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/units.html">Units in EXP and pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/multistep.html">N-Body optimization in EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/centering.html">Centering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/yamlconfig.html">What is YAML?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/yamlconfig.html#an-annotated-exp-yaml-configuration">An annotated EXP YAML configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/howtosim.html">How to run your own N-body simulation in EXP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions (FAQ)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Are there pre-compiled versions of pyEXP and EXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#i-only-want-pyexp-do-i-need-c-to-compile-exp">I only want pyEXP, do I need C++ to compile EXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#why-would-i-use-exp-rather-than-pyexp">Why would I use EXP rather than pyEXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#what-hardware-do-i-need-to-run-exp-and-pyexp">What hardware do I need to run EXP and pyEXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#how-do-i-restart-exp-from-a-checkpoint">How do I restart EXP from a checkpoint?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#my-hpc-cluster-does-not-have-the-required-dependencies-what-are-my-options">My HPC cluster does not have the required dependencies.  What are my options?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#can-i-run-exp-or-pyexp-in-a-container">Can I run EXP or pyEXP in a container?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#i-got-a-seg-fault-now-what-do-i-do">I got a “seg fault”, now what do I do?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#how-can-i-do-a-calculation-with-phase-space-in-pyexp">How can I do a calculation with phase space in pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html#what-do-these-parameters-mean">What do these parameters mean?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to solve specific problems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/visualizing-bases.html">How to visualize the BFE bases used to make your coefficients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/making-coefficients.html">How to  generate coefficients from phase-space snapshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/saving-coefficients.html">How to save and reuse your newly generated coefficients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/visualizing-fields.html">How to convert your coefficients back to physical fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/make-movies.html">Making movies of your BFE field quantities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/using-mssa.html">How to use mSSA with your coefficient series in pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/orbits.html">Generating orbits in your BFE potential fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/replay.html">Replaying a simulation using EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/exp-phase-space.html">The EXP phase-space format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/EXP-output.html">How the EXP N-body code selects what and when to write data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/flatdisk.html">How to configure a razor-thin disk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/debug.html">Debugging EXP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending EXP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/design.html">Software design goals and features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/design.html#overall-organization-of-the-code">Overall organization of the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/design.html#parallel-usage">Parallel usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/usermodules.html">User modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/newforces.html">How to make a new EXP force</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More about EXP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../news.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing to EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doxygen.html">Index to C++ classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pybind11.html">Index to pyEXP classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versioning.html">Versioning and API stability</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">EXP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Changelog</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/exp_repo/extern/pybind11/docs/changelog.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<span id="id1"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Link to this heading"></a></h1>
<p>Starting with version 1.8.0, pybind11 releases use a <a class="reference external" href="http://semver.org">semantic versioning</a> policy.</p>
<p>Changes will be added here periodically from the “Suggested changelog entry”
block in pull request descriptions.</p>
<section id="in-development">
<h2>IN DEVELOPMENT<a class="headerlink" href="#in-development" title="Link to this heading"></a></h2>
<p>Changes will be summarized here periodically.</p>
<p>New Features:</p>
<ul class="simple">
<li><p>Support for Python 3.7 was removed. (Official end-of-life: 2023-06-27).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5191">#5191</a></p></li>
<li><p>stl.h <code class="docutils literal notranslate"><span class="pre">list|set|map_caster</span></code> were made more user friendly: it is no longer
necessary to explicitly convert Python iterables to <code class="docutils literal notranslate"><span class="pre">tuple()</span></code>, <code class="docutils literal notranslate"><span class="pre">set()</span></code>,
or <code class="docutils literal notranslate"><span class="pre">map()</span></code> in many common situations.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4686">#4686</a></p></li>
<li><p>Support for CMake older than 3.15 removed. CMake 3.15-3.30 supported.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5304">#5304</a></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">array_caster</span></code> in pybind11/stl.h was enhanced to support value types that are not default-constructible.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5305">#5305</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::warnings</span></code> namespace with <code class="docutils literal notranslate"><span class="pre">py::warnings::warn</span></code> and <code class="docutils literal notranslate"><span class="pre">py::warnings::new_warning_type</span></code> that provides the interface for Python warnings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5291">#5291</a></p></li>
</ul>
</section>
<section id="version-2-13-6-september-13-2024">
<h2>Version 2.13.6 (September 13, 2024)<a class="headerlink" href="#version-2-13-6-september-13-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>A new <code class="docutils literal notranslate"><span class="pre">self._pybind11_conduit_v1_()</span></code> method is automatically added to all
<code class="docutils literal notranslate"><span class="pre">py::class_</span></code>-wrapped types, to enable type-safe interoperability between
different independent Python/C++ bindings systems, including pybind11
versions with different <code class="docutils literal notranslate"><span class="pre">PYBIND11_INTERNALS_VERSION</span></code>’s. Supported on
pybind11 2.11.2, 2.12.1, and 2.13.6+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5296">#5296</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">__cpp_nontype_template_args</span></code> instead of <code class="docutils literal notranslate"><span class="pre">__cpp_nontype_template_parameter_class</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5330">#5330</a></p></li>
<li><p>Properly translate C++ exception to Python exception when creating Python buffer from wrapped object.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5324">#5324</a></p></li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><p>Adds an answer (FAQ) for “What is a highly conclusive and simple way to find memory leaks?”.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5340">#5340</a></p></li>
</ul>
</section>
<section id="version-2-13-5-august-22-2024">
<h2>Version 2.13.5 (August 22, 2024)<a class="headerlink" href="#version-2-13-5-august-22-2024" title="Link to this heading"></a></h2>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fix includes when using Windows long paths (<code class="docutils literal notranslate"><span class="pre">\\?\</span></code> prefix).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5321">#5321</a></p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">-Wpedantic</span></code> in C++20 mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5322">#5322</a></p></li>
<li><p>Fix and test <code class="docutils literal notranslate"><span class="pre">&lt;ranges&gt;</span></code> support for <code class="docutils literal notranslate"><span class="pre">py::tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">py::list</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5314">#5314</a></p></li>
</ul>
</section>
<section id="version-2-13-4-august-14-2024">
<h2>Version 2.13.4 (August 14, 2024)<a class="headerlink" href="#version-2-13-4-august-14-2024" title="Link to this heading"></a></h2>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fix paths with spaces, including on Windows.
(Replaces regression from <a class="reference external" href="https://github.com/pybind/pybind11/pull/5302">#5302</a>)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4874">#4874</a></p></li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><p>Remove repetitive words.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5308">#5308</a></p></li>
</ul>
</section>
<section id="version-2-13-3-august-13-2024">
<h2>Version 2.13.3 (August 13, 2024)<a class="headerlink" href="#version-2-13-3-august-13-2024" title="Link to this heading"></a></h2>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Quote paths from pybind11-config
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5302">#5302</a></p></li>
<li><p>Fix typo in Emscripten support when in config mode (CMake)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5301">#5301</a></p></li>
</ul>
</section>
<section id="version-2-13-2-august-13-2024">
<h2>Version 2.13.2 (August 13, 2024)<a class="headerlink" href="#version-2-13-2-august-13-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">pybind11::detail::type_caster_std_function_specializations</span></code> feature was added, to support specializations for
<code class="docutils literal notranslate"><span class="pre">std::function</span></code>’s with return types that require custom to-Python conversion behavior (to primary use case is to catch and
convert exceptions).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4597">#4597</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">PyMutex</span></code> instead of <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code> for internal locking in the free-threaded build.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5219">#5219</a></p></li>
<li><p>Add a special type annotation for C++ empty tuple.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5214">#5214</a></p></li>
<li><p>When compiling for WebAssembly, add the required exception flags (CMake 3.13+).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5298">#5298</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Make <code class="docutils literal notranslate"><span class="pre">gil_safe_call_once_and_store</span></code> thread-safe in free-threaded CPython.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5246">#5246</a></p></li>
<li><p>A missing <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;algorithm&gt;</span></code> in pybind11/typing.h was added to fix build errors (in case user code does not already depend
on that include).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5208">#5208</a></p></li>
<li><p>Fix regression introduced in #5201 for GCC&lt;10.3 in C++20 mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5205">#5205</a></p></li>
</ul>
<ul class="simple">
<li><p>Remove extra = when assigning flto value in the case for Clang in CMake.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5207">#5207</a></p></li>
</ul>
<p>Tests:</p>
<ul class="simple">
<li><p>Adding WASM testing to our CI (Pyodide / Emscripten via scikit-build-core).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4745">#4745</a></p></li>
<li><p>clang-tidy (in GitHub Actions) was updated from clang 15 to clang 18.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5272">#5272</a></p></li>
</ul>
</section>
<section id="version-2-13-1-june-26-2024">
<h2>Version 2.13.1 (June 26, 2024)<a class="headerlink" href="#version-2-13-1-june-26-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>Add support for <code class="docutils literal notranslate"><span class="pre">Typing.Callable[...,</span> <span class="pre">T]</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5202">#5202</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Avoid aligned allocation in free-threaded build in order to support macOS
versions before 10.14.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5200">#5200</a></p></li>
</ul>
</section>
<section id="version-2-13-0-june-25-2024">
<h2>Version 2.13.0 (June 25, 2024)<a class="headerlink" href="#version-2-13-0-june-25-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>Support free-threaded CPython (3.13t). Add <code class="docutils literal notranslate"><span class="pre">py::mod_gil_not_used()</span></code> tag to
indicate if a module supports running with the GIL disabled.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5148">#5148</a></p></li>
<li><p>Support for Python 3.6 was removed. (Official end-of-life: 2021-12-23).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5177">#5177</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::list</span></code> gained a <code class="docutils literal notranslate"><span class="pre">.clear()</span></code> method.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5153">#5153</a></p></li>
</ul>
<ul class="simple">
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">Union</span></code>, <code class="docutils literal notranslate"><span class="pre">Optional</span></code>, <code class="docutils literal notranslate"><span class="pre">type[T]</span></code>, <code class="docutils literal notranslate"><span class="pre">typing.TypeGuard</span></code>,
<code class="docutils literal notranslate"><span class="pre">typing.TypeIs</span></code>, <code class="docutils literal notranslate"><span class="pre">typing.Never</span></code>, <code class="docutils literal notranslate"><span class="pre">typing.NoReturn</span></code> and
<code class="docutils literal notranslate"><span class="pre">typing.Literal</span></code> was added to <code class="docutils literal notranslate"><span class="pre">pybind11/typing.h</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5166">#5166</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5165">#5165</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5194">#5194</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5193">#5193</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5192">#5192</a></p></li>
</ul>
<ul class="simple">
<li><p>In CMake, if <code class="docutils literal notranslate"><span class="pre">PYBIND11_USE_CROSSCOMPILING</span></code> is enabled, then
<code class="docutils literal notranslate"><span class="pre">CMAKE_CROSSCOMPILING</span></code> will be respected and will keep pybind11 from
accessing the interpreter during configuration. Several CMake variables will
be required in this case, but can be deduced from the environment variable
<code class="docutils literal notranslate"><span class="pre">SETUPTOOLS_EXT_SUFFIX</span></code>. The default (currently <code class="docutils literal notranslate"><span class="pre">OFF</span></code>) may be changed in
the future.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5083">#5083</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>A refcount bug (leading to heap-use-after-free) involving trampoline
functions with <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> return type was fixed.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5156">#5156</a></p></li>
<li><p>Return <code class="docutils literal notranslate"><span class="pre">py::ssize_t</span></code> from <code class="docutils literal notranslate"><span class="pre">.ref_count()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">int</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5139">#5139</a></p></li>
<li><p>A subtle bug involving C++ types with unusual <code class="docutils literal notranslate"><span class="pre">operator&amp;</span></code> overrides
was fixed.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5189">#5189</a></p></li>
<li><p>Support Python 3.13 with minor fix, add to CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5127">#5127</a></p></li>
</ul>
<ul class="simple">
<li><p>Fix mistake affecting old cmake and old boost.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5149">#5149</a></p></li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><p>Build docs updated to feature scikit-build-core and meson-python, and updated
setuptools instructions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5168">#5168</a></p></li>
</ul>
<p>Tests:</p>
<ul class="simple">
<li><p>Avoid immortal objects in tests.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5150">#5150</a></p></li>
</ul>
<p>CI:</p>
<ul class="simple">
<li><p>Compile against Python 3.13t in CI.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">macos-13</span></code> (Intel) for CI jobs for now (will drop Python 3.7 soon).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5109">#5109</a></p></li>
<li><p>Releases now have artifact attestations, visible at
<a class="reference external" href="https://github.com/pybind/pybind11/attestations">https://github.com/pybind/pybind11/attestations</a>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5196">#5196</a></p></li>
</ul>
<p>Other:</p>
<ul class="simple">
<li><p>Some cleanup in preparation for 3.13 support.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5137">#5137</a></p></li>
<li><p>Avoid a warning by ensuring an iterator end check is included in release mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5129">#5129</a></p></li>
<li><p>Bump max cmake to 3.29.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5075">#5075</a></p></li>
<li><p>Update docs and noxfile.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5071">#5071</a></p></li>
</ul>
</section>
<section id="version-2-12-1-september-13-2024">
<h2>Version 2.12.1 (September 13, 2024)<a class="headerlink" href="#version-2-12-1-september-13-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>A new <code class="docutils literal notranslate"><span class="pre">self._pybind11_conduit_v1_()</span></code> method is automatically added to all
<code class="docutils literal notranslate"><span class="pre">py::class_</span></code>-wrapped types, to enable type-safe interoperability between
different independent Python/C++ bindings systems, including pybind11
versions with different <code class="docutils literal notranslate"><span class="pre">PYBIND11_INTERNALS_VERSION</span></code>’s. Supported on
pybind11 2.11.2, 2.12.1, and 2.13.6+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5296">#5296</a></p></li>
</ul>
</section>
<section id="version-2-12-0-march-27-2024">
<h2>Version 2.12.0 (March 27, 2024)<a class="headerlink" href="#version-2-12-0-march-27-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11</span></code> now supports compiling for
<a class="reference external" href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html">NumPy 2</a>. Most
code shouldn’t change (see <a class="reference internal" href="upgrade.html#upgrade-guide-2-12"><span class="std std-ref">v2.12</span></a> for details). However,
if you experience issues you can define <code class="docutils literal notranslate"><span class="pre">PYBIND11_NUMPY_1_ONLY</span></code> to disable
the new support for now, but this will be removed in the future.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5050">#5050</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/gil_safe_call_once.h</span></code> was added (it needs to be included
explicitly). The primary use case is GIL-safe initialization of C++
<code class="docutils literal notranslate"><span class="pre">static</span></code> variables.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4877">#4877</a></p></li>
<li><p>Support move-only iterators in <code class="docutils literal notranslate"><span class="pre">py::make_iterator</span></code>,
<code class="docutils literal notranslate"><span class="pre">py::make_key_iterator</span></code>, <code class="docutils literal notranslate"><span class="pre">py::make_value_iterator</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4834">#4834</a></p></li>
<li><p>Two simple <code class="docutils literal notranslate"><span class="pre">py::set_error()</span></code> functions were added and the documentation was
updated accordingly. In particular, <code class="docutils literal notranslate"><span class="pre">py::exception&lt;&gt;::operator()</span></code> was
deprecated (use one of the new functions instead). The documentation for
<code class="docutils literal notranslate"><span class="pre">py::exception&lt;&gt;</span></code> was further updated to not suggest code that may result
in undefined behavior.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4772">#4772</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Removes potential for Undefined Behavior during process teardown.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4897">#4897</a></p></li>
<li><p>Improve compatibility with the nvcc compiler (especially CUDA 12.1/12.2).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4893">#4893</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/numpy.h</span></code> now imports NumPy’s <code class="docutils literal notranslate"><span class="pre">multiarray</span></code> and <code class="docutils literal notranslate"><span class="pre">_internal</span></code>
submodules with paths depending on the installed version of NumPy (for
compatibility with NumPy 2).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4857">#4857</a></p></li>
<li><p>Builtins collections names in docstrings are now consistently rendered in
lowercase (list, set, dict, tuple), in accordance with PEP 585.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4833">#4833</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::typing::Iterator&lt;T&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">py::typing::Iterable&lt;T&gt;</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4832">#4832</a></p></li>
<li><p>Render <code class="docutils literal notranslate"><span class="pre">py::function</span></code> as <code class="docutils literal notranslate"><span class="pre">Callable</span></code> in docstring.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4829">#4829</a></p></li>
<li><p>Also bump <code class="docutils literal notranslate"><span class="pre">PYBIND11_INTERNALS_VERSION</span></code> for MSVC, which unlocks two new
features without creating additional incompatibilities.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4819">#4819</a></p></li>
<li><p>Guard against crashes/corruptions caused by modules built with different MSVC
versions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4779">#4779</a></p></li>
<li><p>A long-standing bug in the handling of Python multiple inheritance was fixed.
See PR #4762 for the rather complex details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4762">#4762</a></p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">bind_map</span></code> with <code class="docutils literal notranslate"><span class="pre">using</span></code> declarations.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4952">#4952</a></p></li>
<li><p>Qualify <code class="docutils literal notranslate"><span class="pre">py::detail::concat</span></code> usage to avoid ADL selecting one from
somewhere else, such as modernjson’s concat.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4955">#4955</a></p></li>
<li><p>Use new PyCode API on Python 3.12+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4916">#4916</a></p></li>
<li><p>Minor cleanup from warnings reported by Clazy.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4988">#4988</a></p></li>
<li><p>Remove typing and duplicate <code class="docutils literal notranslate"><span class="pre">class_</span></code> for <code class="docutils literal notranslate"><span class="pre">KeysView</span></code>/<code class="docutils literal notranslate"><span class="pre">ValuesView</span></code>/<code class="docutils literal notranslate"><span class="pre">ItemsView</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4985">#4985</a></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">PyObject_VisitManagedDict()</span></code> and <code class="docutils literal notranslate"><span class="pre">PyObject_ClearManagedDict()</span></code> on Python 3.13 and newer.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4973">#4973</a></p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">make_static_property_type()</span></code> to make it compatible with Python 3.13.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4971">#4971</a></p></li>
</ul>
<ul class="simple">
<li><p>Render typed iterators for <code class="docutils literal notranslate"><span class="pre">make_iterator</span></code>, <code class="docutils literal notranslate"><span class="pre">make_key_iterator</span></code>,
<code class="docutils literal notranslate"><span class="pre">make_value_iterator</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4876">#4876</a></p></li>
<li><p>Add several missing type name specializations.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5073">#5073</a></p></li>
<li><p>Change docstring render for <code class="docutils literal notranslate"><span class="pre">py::buffer</span></code>, <code class="docutils literal notranslate"><span class="pre">py::sequence</span></code> and
<code class="docutils literal notranslate"><span class="pre">py::handle</span></code> (to <code class="docutils literal notranslate"><span class="pre">Buffer</span></code>, <code class="docutils literal notranslate"><span class="pre">Sequence</span></code>, <code class="docutils literal notranslate"><span class="pre">Any</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4831">#4831</a></p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">base_enum.__str__</span></code> docstring.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4827">#4827</a></p></li>
<li><p>Enforce single line docstring signatures.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4735">#4735</a></p></li>
<li><p>Special ‘typed’ wrappers now available in <code class="docutils literal notranslate"><span class="pre">typing.h</span></code> to annotate tuple, dict,
list, set, and function.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4259">#4259</a></p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">handle_type_name</span></code> specialization to type-hint variable length tuples.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5051">#5051</a></p></li>
</ul>
<ul class="simple">
<li><p>Setting <code class="docutils literal notranslate"><span class="pre">PYBIND11_FINDPYTHON</span></code> to OFF will force the old FindPythonLibs mechanism to be used.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5042">#5042</a></p></li>
<li><p>Skip empty <code class="docutils literal notranslate"><span class="pre">PYBIND11_PYTHON_EXECUTABLE_LAST</span></code> for the first cmake run.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4856">#4856</a></p></li>
<li><p>Fix FindPython mode exports &amp; avoid <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> if
<code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> available.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4941">#4941</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Python_ADDITIONAL_VERSIONS</span></code> (classic search) now includes 3.12.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4909">#4909</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11.pc</span></code> is now relocatable by default as long as install destinations
are not absolute paths.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4830">#4830</a></p></li>
<li><p>Correctly detect CMake FindPython removal when used as a subdirectory.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4806">#4806</a></p></li>
<li><p>Don’t require the libs component on CMake 3.18+ when using
PYBIND11_FINDPYTHON (fixes manylinux builds).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4805">#4805</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11_strip</span></code> is no longer automatically applied when
<code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> is unset.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4780">#4780</a></p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">DEBUG_POSFIX</span></code> correctly for debug builds.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4761">#4761</a></p></li>
<li><p>Hardcode lto/thin lto for Emscripten cross-compiles.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4642">#4642</a></p></li>
<li><p>Upgrade maximum supported CMake version to 3.27 to fix CMP0148 warnings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4786">#4786</a></p></li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><p>Small fix to grammar in <code class="docutils literal notranslate"><span class="pre">functions.rst</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4791">#4791</a></p></li>
<li><p>Remove upper bound in example pyproject.toml for setuptools.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4774">#4774</a></p></li>
</ul>
<p>CI:</p>
<ul class="simple">
<li><p>CI: Update NVHPC to 23.5 and Ubuntu 20.04.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4764">#4764</a></p></li>
<li><p>Test on PyPy 3.10.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4714">#4714</a></p></li>
</ul>
<p>Other:</p>
<ul class="simple">
<li><p>Use Ruff formatter instead of Black.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4912">#4912</a></p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">assert()</span></code> was added to help Coverty avoid generating a false positive.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4817">#4817</a></p></li>
</ul>
</section>
<section id="version-2-11-2-september-13-2024">
<h2>Version 2.11.2 (September 13, 2024)<a class="headerlink" href="#version-2-11-2-september-13-2024" title="Link to this heading"></a></h2>
<p>New Features:</p>
<ul class="simple">
<li><p>A new <code class="docutils literal notranslate"><span class="pre">self._pybind11_conduit_v1_()</span></code> method is automatically added to all
<code class="docutils literal notranslate"><span class="pre">py::class_</span></code>-wrapped types, to enable type-safe interoperability between
different independent Python/C++ bindings systems, including pybind11
versions with different <code class="docutils literal notranslate"><span class="pre">PYBIND11_INTERNALS_VERSION</span></code>’s. Supported on
pybind11 2.11.2, 2.12.1, and 2.13.6+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/5296">#5296</a></p></li>
</ul>
</section>
<section id="version-2-11-1-july-17-2023">
<h2>Version 2.11.1 (July 17, 2023)<a class="headerlink" href="#version-2-11-1-july-17-2023" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_NO_ASSERT_GIL_HELD_INCREF_DECREF</span></code> is now provided as an option
for disabling the default-on <code class="docutils literal notranslate"><span class="pre">PyGILState_Check()</span></code>’s in
<code class="docutils literal notranslate"><span class="pre">pybind11::handle</span></code>’s <code class="docutils literal notranslate"><span class="pre">inc_ref()</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">dec_ref()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4753">#4753</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF</span></code> was disabled for PyPy in general
(not just PyPy Windows).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4751">#4751</a></p></li>
</ul>
</section>
<section id="version-2-11-0-july-14-2023">
<h2>Version 2.11.0 (July 14, 2023)<a class="headerlink" href="#version-2-11-0-july-14-2023" title="Link to this heading"></a></h2>
<p>New features:</p>
<ul class="simple">
<li><p>The newly added <code class="docutils literal notranslate"><span class="pre">pybind11::detail::is_move_constructible</span></code> trait can be
specialized for cases in which <code class="docutils literal notranslate"><span class="pre">std::is_move_constructible</span></code> does not work
as needed. This is very similar to the long-established
<code class="docutils literal notranslate"><span class="pre">pybind11::detail::is_copy_constructible</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4631">#4631</a></p></li>
<li><p>Introduce <code class="docutils literal notranslate"><span class="pre">recursive_container_traits</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4623">#4623</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/type_caster_pyobject_ptr.h</span></code> was added to support automatic
wrapping of APIs that make use of <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>. This header needs to
included explicitly (i.e. it is not included implicitly
with <code class="docutils literal notranslate"><span class="pre">pybind/pybind11.h</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4601">#4601</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_descriptor&lt;&gt;</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">npy_format_descriptor&lt;&gt;</span></code> <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>
specializations were added. The latter enables <code class="docutils literal notranslate"><span class="pre">py::array_t&lt;PyObject</span> <span class="pre">*&gt;</span></code>
to/from-python conversions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4674">#4674</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer_info</span></code> gained an <code class="docutils literal notranslate"><span class="pre">item_type_is_equivalent_to&lt;T&gt;()</span></code> member
function.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4674">#4674</a></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">capsule</span></code> API gained a user-friendly constructor
(<code class="docutils literal notranslate"><span class="pre">py::capsule(ptr,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">dtor)</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4720">#4720</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyGILState_Check()</span></code>’s in <code class="docutils literal notranslate"><span class="pre">pybind11::handle</span></code>’s <code class="docutils literal notranslate"><span class="pre">inc_ref()</span></code> &amp;
<code class="docutils literal notranslate"><span class="pre">dec_ref()</span></code> are now enabled by default again.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4246">#4246</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::initialize_interpreter()</span></code> using <code class="docutils literal notranslate"><span class="pre">PyConfig_InitPythonConfig()</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">PyConfig_InitIsolatedConfig()</span></code>, to obtain complete
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4473">#4473</a></p></li>
<li><p>Cast errors now always include Python type information, even if
<code class="docutils literal notranslate"><span class="pre">PYBIND11_DETAILED_ERROR_MESSAGES</span></code> is not defined. This increases binary
sizes slightly (~1.5%) but the error messages are much more informative.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4463">#4463</a></p></li>
<li><p>The docstring generation for the <code class="docutils literal notranslate"><span class="pre">std::array</span></code>-list caster was fixed.
Previously, signatures included the size of the list in a non-standard,
non-spec compliant way. The new format conforms to PEP 593.
<strong>Tooling for processing the docstrings may need to be updated accordingly.</strong>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4679">#4679</a></p></li>
<li><p>Setter return values (which are inaccessible for all practical purposes) are
no longer converted to Python (only to be discarded).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4621">#4621</a></p></li>
<li><p>Allow lambda specified to function definition to be <code class="docutils literal notranslate"><span class="pre">noexcept(true)</span></code>
in C++17.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4593">#4593</a></p></li>
<li><p>Get rid of recursive template instantiations for concatenating type
signatures on C++17 and higher.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4587">#4587</a></p></li>
<li><p>Compatibility with Python 3.12 (beta). Note that the minimum pybind11
ABI version for Python 3.12 is version 5. (The default ABI version
for Python versions up to and including 3.11 is still version 4.).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4570">#4570</a></p></li>
<li><p>With <code class="docutils literal notranslate"><span class="pre">PYBIND11_INTERNALS_VERSION</span> <span class="pre">5</span></code> (default for Python 3.12+), MSVC builds
use <code class="docutils literal notranslate"><span class="pre">std::hash&lt;std::type_index&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">std::equal_to&lt;std::type_index&gt;</span></code>
instead of string-based type comparisons. This resolves issues when binding
types defined in the unnamed namespace.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4319">#4319</a></p></li>
<li><p>Python exception <code class="docutils literal notranslate"><span class="pre">__notes__</span></code> (introduced with Python 3.11) are now added to
the <code class="docutils literal notranslate"><span class="pre">error_already_set::what()</span></code> output.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4678">#4678</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>CMake 3.27 support was added, CMake 3.4 support was dropped.
FindPython will be used if <code class="docutils literal notranslate"><span class="pre">FindPythonInterp</span></code> is not present.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4719">#4719</a></p></li>
<li><p>Update clang-tidy to 15 in CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4387">#4387</a></p></li>
<li><p>Moved the linting framework over to Ruff.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4483">#4483</a></p></li>
<li><p>Skip <code class="docutils literal notranslate"><span class="pre">lto</span></code> checks and target generation when
<code class="docutils literal notranslate"><span class="pre">CMAKE_INTERPROCEDURAL_OPTIMIZATION</span></code> is defined.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4643">#4643</a></p></li>
<li><p>No longer inject <code class="docutils literal notranslate"><span class="pre">-stdlib=libc++</span></code>, not needed for modern Pythons
(macOS 10.9+).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4639">#4639</a></p></li>
<li><p>PyPy 3.10 support was added, PyPy 3.7 support was dropped.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4728">#4728</a></p></li>
<li><p>Testing with Python 3.12 beta releases was added.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4713">#4713</a></p></li>
</ul>
</section>
<section id="version-2-10-4-mar-16-2023">
<h2>Version 2.10.4 (Mar 16, 2023)<a class="headerlink" href="#version-2-10-4-mar-16-2023" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">pybind11</span></code> gained a <code class="docutils literal notranslate"><span class="pre">--version</span></code> option (prints the version and
exits).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4526">#4526</a></p></li>
</ul>
<p>Bug Fixes:</p>
<ul class="simple">
<li><p>Fix a warning when pydebug is enabled on Python 3.11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4461">#4461</a></p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">gil_scoped_release</span></code> RAII is non-copyable.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4490">#4490</a></p></li>
<li><p>Ensure the tests dir does not show up with new versions of setuptools.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4510">#4510</a></p></li>
<li><p>Better stacklevel for a warning in setuptools helpers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4516">#4516</a></p></li>
</ul>
</section>
<section id="version-2-10-3-jan-3-2023">
<h2>Version 2.10.3 (Jan 3, 2023)<a class="headerlink" href="#version-2-10-3-jan-3-2023" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p>Temporarily made our GIL status assertions (added in 2.10.2) disabled by
default (re-enable manually by defining
<code class="docutils literal notranslate"><span class="pre">PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF</span></code>, will be enabled in 2.11).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4432">#4432</a></p></li>
<li><p>Improved error messages when <code class="docutils literal notranslate"><span class="pre">inc_ref</span></code>/<code class="docutils literal notranslate"><span class="pre">dec_ref</span></code> are called with an
invalid GIL state.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4427">#4427</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4436">#4436</a></p></li>
</ul>
<p>Bug Fixes:</p>
<ul class="simple">
<li><p>Some minor touchups found by static analyzers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4440">#4440</a></p></li>
</ul>
</section>
<section id="version-2-10-2-dec-20-2022">
<h2>Version 2.10.2 (Dec 20, 2022)<a class="headerlink" href="#version-2-10-2-dec-20-2022" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scoped_interpreter</span></code> constructor taking <code class="docutils literal notranslate"><span class="pre">PyConfig</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4330">#4330</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/eigen/tensor.h</span></code> adds converters to and from <code class="docutils literal notranslate"><span class="pre">Eigen::Tensor</span></code> and
<code class="docutils literal notranslate"><span class="pre">Eigen::TensorMap</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4201">#4201</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyGILState_Check()</span></code>’s  were integrated to <code class="docutils literal notranslate"><span class="pre">pybind11::handle</span></code>
<code class="docutils literal notranslate"><span class="pre">inc_ref()</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">dec_ref()</span></code>. The added GIL checks are guarded by
<code class="docutils literal notranslate"><span class="pre">PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF</span></code>, which is the default only if
<code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> is not defined. (Made non-default in 2.10.3, will be active in 2.11)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4246">#4246</a></p></li>
<li><p>Add option for enable/disable enum members in docstring.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2768">#2768</a></p></li>
<li><p>Fixed typing of <code class="docutils literal notranslate"><span class="pre">KeysView</span></code>, <code class="docutils literal notranslate"><span class="pre">ValuesView</span></code> and <code class="docutils literal notranslate"><span class="pre">ItemsView</span></code> in <code class="docutils literal notranslate"><span class="pre">bind_map</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4353">#4353</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Bug fix affecting only Python 3.6 under very specific, uncommon conditions:
move <code class="docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code> call to the correct location.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4350">#4350</a></p></li>
<li><p>Fix segfault bug when passing foreign native functions to functional.h.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4254">#4254</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>Support setting PYTHON_LIBRARIES manually for Windows ARM cross-compilation
(classic mode).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4406">#4406</a></p></li>
<li><p>Extend IPO/LTO detection for ICX (a.k.a IntelLLVM) compiler.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4402">#4402</a></p></li>
<li><p>Allow calling <code class="docutils literal notranslate"><span class="pre">find_package(pybind11</span> <span class="pre">CONFIG)</span></code> multiple times from separate
directories in the same CMake project and properly link Python (new mode).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4401">#4401</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiprocessing_set_spawn</span></code> in pytest fixture for added safety.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4377">#4377</a></p></li>
<li><p>Fixed a bug in two pybind11/tools cmake scripts causing “Unknown arguments specified” errors.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4327">#4327</a></p></li>
</ul>
</section>
<section id="version-2-10-1-oct-31-2022">
<h2>Version 2.10.1 (Oct 31, 2022)<a class="headerlink" href="#version-2-10-1-oct-31-2022" title="Link to this heading"></a></h2>
<p>This is the first version to fully support embedding the newly released Python 3.11.</p>
<p>Changes:</p>
<ul class="simple">
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">pybind11::capsule</span></code> constructor to take null destructor pointers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4221">#4221</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">embed.h</span></code> was changed so that <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> is used also with Python 3.11
(established behavior).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4119">#4119</a></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">PYBIND11_SIMPLE_GIL_MANAGEMENT</span></code> option was added (cmake, C++ define),
along with many additional tests in <code class="docutils literal notranslate"><span class="pre">test_gil_scoped.py</span></code>. The option may be
useful to try when debugging GIL-related issues, to determine if the more
complex default implementation is or is not to blame. See #4216 for
background. WARNING: Please be careful to not create ODR violations when
using the option: everything that is linked together with mutual symbol
visibility needs to be rebuilt.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4216">#4216</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_EXPORT_EXCEPTION</span></code> was made non-empty only under macOS. This makes
Linux builds safer, and enables the removal of warning suppression pragmas for
Windows.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4298">#4298</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fixed a bug where <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> was not propagated from various
<code class="docutils literal notranslate"><span class="pre">py::str</span></code> ctors when decoding surrogate utf characters.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4294">#4294</a></p></li>
<li><p>Revert perfect forwarding for <code class="docutils literal notranslate"><span class="pre">make_iterator</span></code>. This broke at least one
valid use case. May revisit later.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4234">#4234</a></p></li>
<li><p>Fix support for safe casts to <code class="docutils literal notranslate"><span class="pre">void*</span></code> (regression in 2.10.0).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4275">#4275</a></p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">char8_t</span></code> support (regression in 2.9).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4278">#4278</a></p></li>
<li><p>Unicode surrogate character in Python exception message leads to process
termination in <code class="docutils literal notranslate"><span class="pre">error_already_set::what()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4297">#4297</a></p></li>
<li><p>Fix MSVC 2019 v.1924 &amp; C++14 mode error for <code class="docutils literal notranslate"><span class="pre">overload_cast</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4188">#4188</a></p></li>
<li><p>Make augmented assignment operators non-const for the object-api. Behavior
was previously broken for augmented assignment operators.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4065">#4065</a></p></li>
<li><p>Add proper error checking to C++ bindings for Python list append and insert.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4208">#4208</a></p></li>
<li><p>Work-around for Nvidia’s CUDA nvcc compiler in versions 11.4.0 - 11.8.0.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4220">#4220</a></p></li>
<li><p>A workaround for PyPy was added in the <code class="docutils literal notranslate"><span class="pre">py::error_already_set</span></code>
implementation, related to PR <a class="reference external" href="https://github.com/pybind/pybind11/pull/1895">#1895</a>
released with v2.10.0.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4079">#4079</a></p></li>
<li><p>Fixed compiler errors when C++23 <code class="docutils literal notranslate"><span class="pre">std::forward_like</span></code> is available.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4136">#4136</a></p></li>
<li><p>Properly raise exceptions in contains methods (like when an object in unhashable).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4209">#4209</a></p></li>
<li><p>Further improve another error in exception handling.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4232">#4232</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_local_internals()</span></code> was made compatible with
<code class="docutils literal notranslate"><span class="pre">finalize_interpreter()</span></code>, fixing potential freezes during interpreter
finalization.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4192">#4192</a></p></li>
</ul>
<p>Performance and style:</p>
<ul class="simple">
<li><p>Reserve space in set and STL map casters if possible. This will prevent
unnecessary rehashing / resizing by knowing the number of keys ahead of time
for Python to C++ casting. This improvement will greatly speed up the casting
of large unordered maps and sets.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4194">#4194</a></p></li>
<li><p>GIL RAII scopes are non-copyable to avoid potential bugs.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4183">#4183</a></p></li>
<li><p>Explicitly default all relevant ctors for pytypes in the <code class="docutils literal notranslate"><span class="pre">PYBIND11_OBJECT</span></code>
macros and enforce the clang-tidy checks <code class="docutils literal notranslate"><span class="pre">modernize-use-equals-default</span></code> in
macros as well.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4017">#4017</a></p></li>
<li><p>Optimize iterator advancement in C++ bindings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4237">#4237</a></p></li>
<li><p>Use the modern <code class="docutils literal notranslate"><span class="pre">PyObject_GenericGetDict</span></code> and <code class="docutils literal notranslate"><span class="pre">PyObject_GenericSetDict</span></code>
for handling dynamic attribute dictionaries.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4106">#4106</a></p></li>
<li><p>Document that users should use <code class="docutils literal notranslate"><span class="pre">PYBIND11_NAMESPACE</span></code> instead of using <code class="docutils literal notranslate"><span class="pre">pybind11</span></code> when
opening namespaces. Using namespace declarations and namespace qualification
remain the same as <code class="docutils literal notranslate"><span class="pre">pybind11</span></code>. This is done to ensure consistent symbol
visibility.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4098">#4098</a></p></li>
<li><p>Mark <code class="docutils literal notranslate"><span class="pre">detail::forward_like</span></code> as constexpr.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4147">#4147</a></p></li>
<li><p>Optimize unpacking_collector when processing <code class="docutils literal notranslate"><span class="pre">arg_v</span></code> arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4219">#4219</a></p></li>
<li><p>Optimize casting C++ object to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4269">#4269</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>CMake: revert overwrite behavior, now opt-in with <code class="docutils literal notranslate"><span class="pre">PYBIND11_PYTHONLIBS_OVERRWRITE</span> <span class="pre">OFF</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4195">#4195</a></p></li>
<li><p>Include a pkg-config file when installing pybind11, such as in the Python
package.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4077">#4077</a></p></li>
<li><p>Avoid stripping debug symbols when <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">Debug</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4078">#4078</a></p></li>
<li><p>Followup to <a class="reference external" href="https://github.com/pybind/pybind11/pull/3948">#3948</a>, fixing vcpkg again.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4123">#4123</a></p></li>
</ul>
</section>
<section id="version-2-10-0-jul-15-2022">
<h2>Version 2.10.0 (Jul 15, 2022)<a class="headerlink" href="#version-2-10-0-jul-15-2022" title="Link to this heading"></a></h2>
<p>Removed support for Python 2.7, Python 3.5, and MSVC 2015. Support for MSVC
2017 is limited due to availability of CI runners; we highly recommend MSVC
2019 or 2022 be used. Initial support added for Python 3.11.</p>
<p>New features:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py::anyset</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">py::frozenset</span></code> were added, with copying (cast) to
<code class="docutils literal notranslate"><span class="pre">std::set</span></code> (similar to <code class="docutils literal notranslate"><span class="pre">set</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3901">#3901</a></p></li>
<li><p>Support bytearray casting to string.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3707">#3707</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type_caster&lt;std::monostate&gt;</span></code> was added. <code class="docutils literal notranslate"><span class="pre">std::monostate</span></code> is a tag type
that allows <code class="docutils literal notranslate"><span class="pre">std::variant</span></code> to act as an optional, or allows default
construction of a <code class="docutils literal notranslate"><span class="pre">std::variant</span></code> holding a non-default constructible type.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3818">#3818</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11::capsule::set_name</span></code> added to mutate the name of the capsule instance.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3866">#3866</a></p></li>
<li><p>NumPy: dtype constructor from type number added, accessors corresponding to
Python API <code class="docutils literal notranslate"><span class="pre">dtype.num</span></code>, <code class="docutils literal notranslate"><span class="pre">dtype.byteorder</span></code>, <code class="docutils literal notranslate"><span class="pre">dtype.flags</span></code> and
<code class="docutils literal notranslate"><span class="pre">dtype.alignment</span></code> added.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3868">#3868</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p>Python 3.6 is now the minimum supported version.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3688">#3688</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3719">#3719</a></p></li>
<li><p>The minimum version for MSVC is now 2017.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3722">#3722</a></p></li>
<li><p>Fix issues with CPython 3.11 betas and add to supported test matrix.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3923">#3923</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_already_set</span></code> is now safer and more performant, especially for
exceptions with long tracebacks, by delaying computation.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1895">#1895</a></p></li>
<li><p>Improve exception handling in python <code class="docutils literal notranslate"><span class="pre">str</span></code> bindings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3826">#3826</a></p></li>
<li><p>The bindings for capsules now have more consistent exception handling.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3825">#3825</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_OBJECT_CVT</span></code> and <code class="docutils literal notranslate"><span class="pre">PYBIND11_OBJECT_CVT_DEFAULT</span></code> macro can now be
used to define classes in namespaces other than pybind11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3797">#3797</a></p></li>
<li><p>Error printing code now uses <code class="docutils literal notranslate"><span class="pre">PYBIND11_DETAILED_ERROR_MESSAGES</span></code> instead of
requiring <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code>, allowing use with release builds if desired.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3913">#3913</a></p></li>
<li><p>Implicit conversion of the literal <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">pybind11::handle</span></code> is now disabled.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4008">#4008</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fix exception handling when <code class="docutils literal notranslate"><span class="pre">pybind11::weakref()</span></code> fails.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3739">#3739</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module_::def_submodule</span></code> was missing proper error handling. This is fixed now.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3973">#3973</a></p></li>
<li><p>The behavior or <code class="docutils literal notranslate"><span class="pre">error_already_set</span></code> was made safer and the highly opaque
“Unknown internal error occurred” message was replaced with a more helpful
message.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3982">#3982</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_already_set::what()</span></code> now handles non-normalized exceptions correctly.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3971">#3971</a></p></li>
<li><p>Support older C++ compilers where filesystem is not yet part of the standard
library and is instead included in <code class="docutils literal notranslate"><span class="pre">std::experimental::filesystem</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3840">#3840</a></p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">-Wfree-nonheap-object</span></code> warnings produced by GCC by avoiding returning
pointers to static objects with <code class="docutils literal notranslate"><span class="pre">return_value_policy::take_ownership</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3946">#3946</a></p></li>
<li><p>Fix cast from pytype rvalue to another pytype.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3949">#3949</a></p></li>
<li><p>Ensure proper behavior when garbage collecting classes with dynamic attributes in Python &gt;=3.9.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4051">#4051</a></p></li>
<li><p>A couple long-standing <code class="docutils literal notranslate"><span class="pre">PYBIND11_NAMESPACE</span></code>
<code class="docutils literal notranslate"><span class="pre">__attribute__((visibility(&quot;hidden&quot;)))</span></code> inconsistencies are now fixed
(affects only unusual environments).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4043">#4043</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11::detail::get_internals()</span></code> is now resilient to in-flight Python
exceptions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3981">#3981</a></p></li>
<li><p>Arrays with a dimension of size 0 are now properly converted to dynamic Eigen
matrices (more common in NumPy 1.23).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4038">#4038</a></p></li>
<li><p>Avoid catching unrelated errors when importing NumPy.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3974">#3974</a></p></li>
</ul>
<p>Performance and style:</p>
<ul class="simple">
<li><p>Added an accessor overload of <code class="docutils literal notranslate"><span class="pre">(object</span> <span class="pre">&amp;&amp;key)</span></code> to reference steal the
object when using python types as keys. This prevents unnecessary reference
count overhead for attr, dictionary, tuple, and sequence look ups. Added
additional regression tests. Fixed a performance bug the caused accessor
assignments to potentially perform unnecessary copies.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3970">#3970</a></p></li>
<li><p>Perfect forward all args of <code class="docutils literal notranslate"><span class="pre">make_iterator</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3980">#3980</a></p></li>
<li><p>Avoid potential bug in pycapsule destructor by adding an <code class="docutils literal notranslate"><span class="pre">error_guard</span></code> to
one of the dtors.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3958">#3958</a></p></li>
<li><p>Optimize dictionary access in <code class="docutils literal notranslate"><span class="pre">strip_padding</span></code> for numpy.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3994">#3994</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stl_bind.h</span></code> bindings now take slice args as a const-ref.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3852">#3852</a></p></li>
<li><p>Made slice constructor more consistent, and improve performance of some
casters by allowing reference stealing.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3845">#3845</a></p></li>
<li><p>Change numpy dtype from_args method to use const ref.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3878">#3878</a></p></li>
<li><p>Follow rule of three to ensure <code class="docutils literal notranslate"><span class="pre">PyErr_Restore</span></code> is called only once.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3872">#3872</a></p></li>
<li><p>Added missing perfect forwarding for <code class="docutils literal notranslate"><span class="pre">make_iterator</span></code> functions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3860">#3860</a></p></li>
<li><p>Optimize c++ to python function casting by using the rvalue caster.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3966">#3966</a></p></li>
<li><p>Optimize Eigen sparse matrix casting by removing unnecessary temporary.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/4064">#4064</a></p></li>
<li><p>Avoid potential implicit copy/assignment constructors causing double free in
<code class="docutils literal notranslate"><span class="pre">strdup_gaurd</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3905">#3905</a></p></li>
<li><p>Enable clang-tidy checks <code class="docutils literal notranslate"><span class="pre">misc-definitions-in-headers</span></code>,
<code class="docutils literal notranslate"><span class="pre">modernize-loop-convert</span></code>, and <code class="docutils literal notranslate"><span class="pre">modernize-use-nullptr</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3881">#3881</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3988">#3988</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>CMake: Fix file extension on Windows with cp36 and cp37 using FindPython.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3919">#3919</a></p></li>
<li><p>CMake: Support multiple Python targets (such as on vcpkg).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3948">#3948</a></p></li>
<li><p>CMake: Fix issue with NVCC on Windows.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3947">#3947</a></p></li>
<li><p>CMake: Drop the bitness check on cross compiles (like targeting WebAssembly
via Emscripten).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3959">#3959</a></p></li>
<li><p>Add MSVC builds in debug mode to CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3784">#3784</a></p></li>
<li><p>MSVC 2022 C++20 coverage was added to GitHub Actions, including Eigen.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3732">#3732</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3741">#3741</a></p></li>
</ul>
<p>Backend and tidying up:</p>
<ul class="simple">
<li><p>New theme for the documentation.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3109">#3109</a></p></li>
<li><p>Remove idioms in code comments.  Use more inclusive language.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3809">#3809</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;iostream&gt;</span></code> was removed from the <code class="docutils literal notranslate"><span class="pre">pybind11/stl.h</span></code> header. Your
project may break if it has a transitive dependency on this include. The fix
is to “Include What You Use”.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3928">#3928</a></p></li>
<li><p>Avoid <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">&lt;command&gt;</span></code> usage in internal tests.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3734">#3734</a></p></li>
</ul>
</section>
<section id="version-2-9-2-mar-29-2022">
<h2>Version 2.9.2 (Mar 29, 2022)<a class="headerlink" href="#version-2-9-2-mar-29-2022" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p>Enum now has an <code class="docutils literal notranslate"><span class="pre">__index__</span></code> method on Python &lt;3.8 too.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3700">#3700</a></p></li>
<li><p>Local internals are now cleared after finalizing the interpreter.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3744">#3744</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Better support for Python 3.11 alphas.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3694">#3694</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_TYPE_CASTER</span></code> now uses fully qualified symbols, so it can be used
outside of <code class="docutils literal notranslate"><span class="pre">pybind11::detail</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3758">#3758</a></p></li>
<li><p>Some fixes for PyPy 3.9.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3768">#3768</a></p></li>
<li><p>Fixed a potential memleak in PyPy in <code class="docutils literal notranslate"><span class="pre">get_type_override</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3774">#3774</a></p></li>
<li><p>Fix usage of <code class="docutils literal notranslate"><span class="pre">VISIBILITY_INLINES_HIDDEN</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3721">#3721</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>Uses <code class="docutils literal notranslate"><span class="pre">sysconfig</span></code> module to determine installation locations on Python &gt;=
3.10, instead of <code class="docutils literal notranslate"><span class="pre">distutils</span></code> which has been deprecated.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3764">#3764</a></p></li>
<li><p>Support Catch 2.13.5+ (supporting GLIBC 2.34+).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3679">#3679</a></p></li>
<li><p>Fix test failures with numpy 1.22 by ignoring whitespace when comparing
<code class="docutils literal notranslate"><span class="pre">str()</span></code> of dtypes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3682">#3682</a></p></li>
</ul>
<p>Backend and tidying up:</p>
<ul class="simple">
<li><p>clang-tidy: added <code class="docutils literal notranslate"><span class="pre">readability-qualified-auto</span></code>,
<code class="docutils literal notranslate"><span class="pre">readability-braces-around-statements</span></code>,
<code class="docutils literal notranslate"><span class="pre">cppcoreguidelines-prefer-member-initializer</span></code>,
<code class="docutils literal notranslate"><span class="pre">clang-analyzer-optin.performance.Padding</span></code>,
<code class="docutils literal notranslate"><span class="pre">cppcoreguidelines-pro-type-static-cast-downcast</span></code>, and
<code class="docutils literal notranslate"><span class="pre">readability-inconsistent-declaration-parameter-name</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3702">#3702</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3699">#3699</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3716">#3716</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3709">#3709</a></p></li>
<li><p>clang-format was added to the pre-commit actions, and the entire code base
automatically reformatted (after several iterations preparing for this leap).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3713">#3713</a></p></li>
</ul>
</section>
<section id="version-2-9-1-feb-2-2022">
<h2>Version 2.9.1 (Feb 2, 2022)<a class="headerlink" href="#version-2-9-1-feb-2-2022" title="Link to this heading"></a></h2>
<p>Changes:</p>
<ul class="simple">
<li><p>If possible, attach Python exception with <code class="docutils literal notranslate"><span class="pre">py::raise_from</span></code> to <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>
when casting from C++ to Python. This will give additional info if Python
exceptions occur in the caster. Adds a test case of trying to convert a set
from C++ to Python when the hash function is not defined in Python.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3605">#3605</a></p></li>
<li><p>Add a mapping of C++11 nested exceptions to their Python exception
equivalent using <code class="docutils literal notranslate"><span class="pre">py::raise_from</span></code>. This attaches the nested exceptions in
Python using the <code class="docutils literal notranslate"><span class="pre">__cause__</span></code> field.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3608">#3608</a></p></li>
<li><p>Propagate Python exception traceback using <code class="docutils literal notranslate"><span class="pre">raise_from</span></code> if a pybind11
function runs out of overloads.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3671">#3671</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::multiple_inheritance</span></code> is now only needed when C++ bases are hidden
from pybind11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3650">#3650</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3659">#3659</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Remove a boolean cast in <code class="docutils literal notranslate"><span class="pre">numpy.h</span></code> that causes MSVC C4800 warnings when
compiling against Python 3.10 or newer.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3669">#3669</a></p></li>
<li><p>Render <code class="docutils literal notranslate"><span class="pre">py::bool_</span></code> and <code class="docutils literal notranslate"><span class="pre">py::float_</span></code> as <code class="docutils literal notranslate"><span class="pre">bool</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code>
respectively.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3622">#3622</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>Fix CMake extension suffix computation on Python 3.10+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3663">#3663</a></p></li>
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">CMAKE_ARGS</span></code> to override CMake args in pybind11’s own <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3577">#3577</a></p></li>
<li><p>Remove a few deprecated c-headers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3610">#3610</a></p></li>
<li><p>More uniform handling of test targets.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3590">#3590</a></p></li>
<li><p>Add clang-tidy readability check to catch potentially swapped function args.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3611">#3611</a></p></li>
</ul>
</section>
<section id="version-2-9-0-dec-28-2021">
<h2>Version 2.9.0 (Dec 28, 2021)<a class="headerlink" href="#version-2-9-0-dec-28-2021" title="Link to this heading"></a></h2>
<p>This is the last version to support Python 2.7 and 3.5.</p>
<p>New Features:</p>
<ul class="simple">
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">py::args</span></code> to be followed by other arguments; the remaining arguments
are implicitly keyword-only, as if a <code class="docutils literal notranslate"><span class="pre">py::kw_only{}</span></code> annotation had been
used.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3402">#3402</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p>Make str/bytes/memoryview more interoperable with <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3521">#3521</a></p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">_</span></code> with <code class="docutils literal notranslate"><span class="pre">const_name</span></code> in internals, avoid defining <code class="docutils literal notranslate"><span class="pre">pybind::_</span></code>
if <code class="docutils literal notranslate"><span class="pre">_</span></code> defined as macro (common gettext usage)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3423">#3423</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fix a rare warning about extra copy in an Eigen constructor.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3486">#3486</a></p></li>
<li><p>Fix caching of the C++ overrides.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3465">#3465</a></p></li>
<li><p>Add missing <code class="docutils literal notranslate"><span class="pre">std::forward</span></code> calls to some <code class="docutils literal notranslate"><span class="pre">cpp_function</span></code> overloads.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3443">#3443</a></p></li>
<li><p>Support PyPy 7.3.7 and the PyPy3.8 beta. Test python-3.11 on PRs with the
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">dev</span></code> label.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3419">#3419</a></p></li>
<li><p>Replace usage of deprecated <code class="docutils literal notranslate"><span class="pre">Eigen::MappedSparseMatrix</span></code> with
<code class="docutils literal notranslate"><span class="pre">Eigen::Map&lt;Eigen::SparseMatrix&lt;...&gt;&gt;</span></code> for Eigen 3.3+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3499">#3499</a></p></li>
<li><p>Tweaks to support Microsoft Visual Studio 2022.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3497">#3497</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>Nicer CMake printout and IDE organisation for pybind11’s own tests.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3479">#3479</a></p></li>
<li><p>CMake: report version type as part of the version string to avoid a spurious
space in the package status message.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3472">#3472</a></p></li>
<li><p>Flags starting with <code class="docutils literal notranslate"><span class="pre">-g</span></code> in <code class="docutils literal notranslate"><span class="pre">$CFLAGS</span></code> and <code class="docutils literal notranslate"><span class="pre">$CPPFLAGS</span></code> are no longer
overridden by <code class="docutils literal notranslate"><span class="pre">.Pybind11Extension</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3436">#3436</a></p></li>
<li><p>Ensure ThreadPool is closed in <code class="docutils literal notranslate"><span class="pre">setup_helpers</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3548">#3548</a></p></li>
<li><p>Avoid LTS on <code class="docutils literal notranslate"><span class="pre">mips64</span></code> and <code class="docutils literal notranslate"><span class="pre">ppc64le</span></code> (reported broken).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3557">#3557</a></p></li>
</ul>
</section>
<section id="v2-8-1-oct-27-2021">
<h2>v2.8.1 (Oct 27, 2021)<a class="headerlink" href="#v2-8-1-oct-27-2021" title="Link to this heading"></a></h2>
<p>Changes and additions:</p>
<ul class="simple">
<li><p>The simple namespace creation shortcut added in 2.8.0 was deprecated due to
usage of CPython internal API, and will be removed soon. Use
<code class="docutils literal notranslate"><span class="pre">py::module_::import(&quot;types&quot;).attr(&quot;SimpleNamespace&quot;)</span></code>.
<a class="reference external" href="https://github.com/pybinyyd/pybind11/pull/3374">#3374</a></p></li>
<li><p>Add C++ Exception type to throw and catch <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>. Useful for
defining custom <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> methods.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3387">#3387</a></p></li>
</ul>
<p>Fixes:</p>
<ul class="simple">
<li><p>Fixed the potential for dangling references when using properties with
<code class="docutils literal notranslate"><span class="pre">std::optional</span></code> types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3376">#3376</a></p></li>
<li><p>Modernize usage of <code class="docutils literal notranslate"><span class="pre">PyCodeObject</span></code> on Python 3.9+ (moving toward support for
Python 3.11a1)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3368">#3368</a></p></li>
<li><p>A long-standing bug in <code class="docutils literal notranslate"><span class="pre">eigen.h</span></code> was fixed (originally PR #3343). The bug
was unmasked by newly added <code class="docutils literal notranslate"><span class="pre">static_assert</span></code>’s in the Eigen 3.4.0 release.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3352">#3352</a></p></li>
<li><p>Support multiple raw inclusion of CMake helper files (Conan.io does this for
multi-config generators).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3420">#3420</a></p></li>
<li><p>Fix harmless warning on upcoming CMake 3.22.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3368">#3368</a></p></li>
<li><p>Fix 2.8.0 regression with MSVC 2017 + C++17 mode + Python 3.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3407">#3407</a></p></li>
<li><p>Fix 2.8.0 regression that caused undefined behavior (typically
segfaults) in <code class="docutils literal notranslate"><span class="pre">make_key_iterator</span></code>/<code class="docutils literal notranslate"><span class="pre">make_value_iterator</span></code> if dereferencing
the iterator returned a temporary value instead of a reference.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3348">#3348</a></p></li>
</ul>
</section>
<section id="v2-8-0-oct-4-2021">
<h2>v2.8.0 (Oct 4, 2021)<a class="headerlink" href="#v2-8-0-oct-4-2021" title="Link to this heading"></a></h2>
<p>New features:</p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::raise_from</span></code> to enable chaining exceptions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3215">#3215</a></p></li>
<li><p>Allow exception translators to be optionally registered local to a module
instead of applying globally across all pybind11 modules. Use
<code class="docutils literal notranslate"><span class="pre">register_local_exception_translator(ExceptionTranslator&amp;&amp;</span> <span class="pre">translator)</span></code>
instead of  <code class="docutils literal notranslate"><span class="pre">register_exception_translator(ExceptionTranslator&amp;&amp;</span>
<span class="pre">translator)</span></code> to keep your exception remapping code local to the module.
<a class="reference external" href="https://github.com/pybinyyd/pybind11/pull/2650">#2650</a></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">make_simple_namespace</span></code> function for instantiating Python
<code class="docutils literal notranslate"><span class="pre">SimpleNamespace</span></code> objects. <strong>Deprecated in 2.8.1.</strong>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2840">#2840</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11::scoped_interpreter</span></code> and <code class="docutils literal notranslate"><span class="pre">initialize_interpreter</span></code> have new
arguments to allow <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> initialization.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2341">#2341</a></p></li>
<li><p>Allow Python builtins to be used as callbacks in CPython.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1413">#1413</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">view</span></code> to view arrays with a different datatype.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/987">#987</a></p></li>
<li><p>Implemented <code class="docutils literal notranslate"><span class="pre">reshape</span></code> on arrays.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/984">#984</a></p></li>
<li><p>Enable defining custom <code class="docutils literal notranslate"><span class="pre">__new__</span></code> methods on classes by fixing bug
preventing overriding methods if they have non-pybind11 siblings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3265">#3265</a></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">make_value_iterator()</span></code>, and fix <code class="docutils literal notranslate"><span class="pre">make_key_iterator()</span></code> to return
references instead of copies.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3293">#3293</a></p></li>
<li><p>Improve the classes generated by <code class="docutils literal notranslate"><span class="pre">bind_map</span></code>: <a class="reference external" href="https://github.com/pybind/pybind11/pull/3310">#3310</a></p>
<ul>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">.items</span></code> from an iterator to a dictionary view.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">.keys</span></code> and <code class="docutils literal notranslate"><span class="pre">.values</span></code> (both dictionary views).</p></li>
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">__contains__</span></code> to take any object.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11::custom_type_setup</span></code> was added, for customizing the
<code class="docutils literal notranslate"><span class="pre">PyHeapTypeObject</span></code> corresponding to a class, which may be useful for
enabling garbage collection support, among other things.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3287">#3287</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">__file__</span></code> constant when running <code class="docutils literal notranslate"><span class="pre">eval_file</span></code> in an embedded interpreter.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3233">#3233</a></p></li>
<li><p>Python objects and (C++17) <code class="docutils literal notranslate"><span class="pre">std::optional</span></code> now accepted in <code class="docutils literal notranslate"><span class="pre">py::slice</span></code>
constructor.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1101">#1101</a></p></li>
<li><p>The pybind11 proxy types <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>,
<code class="docutils literal notranslate"><span class="pre">list</span></code> now consistently support passing <code class="docutils literal notranslate"><span class="pre">ssize_t</span></code> values for sizes and
indexes. Previously, only <code class="docutils literal notranslate"><span class="pre">size_t</span></code> was accepted in several interfaces.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3219">#3219</a></p></li>
<li><p>Avoid evaluating <code class="docutils literal notranslate"><span class="pre">PYBIND11_TLS_REPLACE_VALUE</span></code> arguments more than once.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3290">#3290</a></p></li>
</ul>
<p>Fixes:</p>
<ul class="simple">
<li><p>Bug fix: enum value’s <code class="docutils literal notranslate"><span class="pre">__int__</span></code> returning non-int when underlying type is
bool or of char type.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1334">#1334</a></p></li>
<li><p>Fixes bug in setting error state in Capsule’s pointer methods.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3261">#3261</a></p></li>
<li><p>A long-standing memory leak in <code class="docutils literal notranslate"><span class="pre">py::cpp_function::initialize</span></code> was fixed.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3229">#3229</a></p></li>
<li><p>Fixes thread safety for some <code class="docutils literal notranslate"><span class="pre">pybind11::type_caster</span></code> which require lifetime
extension, such as for <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3237">#3237</a></p></li>
<li><p>Restore compatibility with gcc 4.8.4 as distributed by ubuntu-trusty, linuxmint-17.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3270">#3270</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>Fix regression in CMake Python package config: improper use of absolute path.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3144">#3144</a></p></li>
<li><p>Cached Python version information could become stale when CMake was re-run
with a different Python version. The build system now detects this and
updates this information.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3299">#3299</a></p></li>
<li><p>Specified UTF8-encoding in setup.py calls of open().
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3137">#3137</a></p></li>
<li><p>Fix a harmless warning from CMake 3.21 with the classic Python discovery.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3220">#3220</a></p></li>
<li><p>Eigen repo and version can now be specified as cmake options.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3324">#3324</a></p></li>
</ul>
<p>Backend and tidying up:</p>
<ul class="simple">
<li><p>Reduced thread-local storage required for keeping alive temporary data for
type conversion to one key per ABI version, rather than one key per extension
module.  This makes the total thread-local storage required by pybind11 2
keys per ABI version.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3275">#3275</a></p></li>
<li><p>Optimize NumPy array construction with additional moves.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3183">#3183</a></p></li>
<li><p>Conversion to <code class="docutils literal notranslate"><span class="pre">std::string</span></code> and <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code> now avoids making an
extra copy of the data on Python &gt;= 3.3.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3257">#3257</a></p></li>
<li><p>Remove const modifier from certain C++ methods on Python collections
(<code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>) such as (<code class="docutils literal notranslate"><span class="pre">clear()</span></code>, <code class="docutils literal notranslate"><span class="pre">append()</span></code>,
<code class="docutils literal notranslate"><span class="pre">insert()</span></code>, etc…) and annotated them with <code class="docutils literal notranslate"><span class="pre">py-non-const</span></code>.</p></li>
<li><p>Enable readability <code class="docutils literal notranslate"><span class="pre">clang-tidy-const-return</span></code> and remove useless consts.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3254">#3254</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3194">#3194</a></p></li>
<li><p>The clang-tidy <code class="docutils literal notranslate"><span class="pre">google-explicit-constructor</span></code> option was enabled.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3250">#3250</a></p></li>
<li><p>Mark a pytype move constructor as noexcept (perf).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3236">#3236</a></p></li>
<li><p>Enable clang-tidy check to guard against inheritance slicing.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3210">#3210</a></p></li>
<li><p>Legacy warning suppression pragma were removed from eigen.h. On Unix
platforms, please use -isystem for Eigen include directories, to suppress
compiler warnings originating from Eigen headers. Note that CMake does this
by default. No adjustments are needed for Windows.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3198">#3198</a></p></li>
<li><p>Format pybind11 with isort consistent ordering of imports
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3195">#3195</a></p></li>
<li><p>The warnings-suppression “pragma clamp” at the top/bottom of pybind11 was
removed, clearing the path to refactoring and IWYU cleanup.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3186">#3186</a></p></li>
<li><p>Enable most bugprone checks in clang-tidy and fix the found potential bugs
and poor coding styles.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3166">#3166</a></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">clang-tidy-readability</span></code> rules to make boolean casts explicit improving
code readability. Also enabled other misc and readability clang-tidy checks.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3148">#3148</a></p></li>
<li><p>Move object in <code class="docutils literal notranslate"><span class="pre">.pop()</span></code> for list.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3116">#3116</a></p></li>
</ul>
</section>
<section id="v2-7-1-aug-3-2021">
<h2>v2.7.1 (Aug 3, 2021)<a class="headerlink" href="#v2-7-1-aug-3-2021" title="Link to this heading"></a></h2>
<p>Minor missing functionality added:</p>
<ul class="simple">
<li><p>Allow Python builtins to be used as callbacks in CPython.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1413">#1413</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fix regression in CMake Python package config: improper use of absolute path.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3144">#3144</a></p></li>
<li><p>Fix Mingw64 and add to the CI testing matrix.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3132">#3132</a></p></li>
<li><p>Specified UTF8-encoding in setup.py calls of open().
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3137">#3137</a></p></li>
<li><p>Add clang-tidy-readability rules to make boolean casts explicit improving
code readability. Also enabled other misc and readability clang-tidy checks.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3148">#3148</a></p></li>
<li><p>Move object in <code class="docutils literal notranslate"><span class="pre">.pop()</span></code> for list.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3116">#3116</a></p></li>
</ul>
<p>Backend and tidying up:</p>
<ul class="simple">
<li><p>Removed and fixed warning suppressions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3127">#3127</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3129">#3129</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3135">#3135</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3141">#3141</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3142">#3142</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3150">#3150</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3152">#3152</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3160">#3160</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3161">#3161</a></p></li>
</ul>
</section>
<section id="v2-7-0-jul-16-2021">
<h2>v2.7.0 (Jul 16, 2021)<a class="headerlink" href="#v2-7-0-jul-16-2021" title="Link to this heading"></a></h2>
<p>New features:</p>
<ul class="simple">
<li><p>Enable <code class="docutils literal notranslate"><span class="pre">py::implicitly_convertible&lt;py::none,</span> <span class="pre">...&gt;</span></code> for
<code class="docutils literal notranslate"><span class="pre">py::class_</span></code>-wrapped types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3059">#3059</a></p></li>
<li><p>Allow function pointer extraction from overloaded functions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2944">#2944</a></p></li>
<li><p>NumPy: added <code class="docutils literal notranslate"><span class="pre">.char_()</span></code> to type which gives the NumPy public <code class="docutils literal notranslate"><span class="pre">char</span></code>
result, which also distinguishes types by bit length (unlike <code class="docutils literal notranslate"><span class="pre">.kind()</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2864">#2864</a></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">pybind11::bytearray</span></code> to manipulate <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> similar to <code class="docutils literal notranslate"><span class="pre">bytes</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2799">#2799</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/stl/filesystem.h</span></code> registers a type caster that, on C++17/Python
3.6+, converts <code class="docutils literal notranslate"><span class="pre">std::filesystem::path</span></code> to <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> and any
<code class="docutils literal notranslate"><span class="pre">os.PathLike</span></code> to <code class="docutils literal notranslate"><span class="pre">std::filesystem::path</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2730">#2730</a></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">PYBIND11_VERSION_HEX</span></code> define was added, similar to <code class="docutils literal notranslate"><span class="pre">PY_VERSION_HEX</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3120">#3120</a></p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py::str</span></code> changed to exclusively hold <code class="docutils literal notranslate"><span class="pre">PyUnicodeObject</span></code>. Previously
<code class="docutils literal notranslate"><span class="pre">py::str</span></code> could also hold <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, which is probably surprising, was
never documented, and can mask bugs (e.g. accidental use of <code class="docutils literal notranslate"><span class="pre">py::str</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">py::bytes</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2409">#2409</a></p></li>
<li><p>Add a safety guard to ensure that the Python GIL is held when C++ calls back
into Python via <code class="docutils literal notranslate"><span class="pre">object_api&lt;&gt;::operator()</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">py::function</span></code>
<code class="docutils literal notranslate"><span class="pre">__call__</span></code>).  (This feature is available for Python 3.6+ only.)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2919">#2919</a></p></li>
<li><p>Catch a missing <code class="docutils literal notranslate"><span class="pre">self</span></code> argument in calls to <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2914">#2914</a></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code> if available to avoid a copy when passing an object
to a <code class="docutils literal notranslate"><span class="pre">std::ostream</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3042">#3042</a></p></li>
<li><p>An important warning about thread safety was added to the <code class="docutils literal notranslate"><span class="pre">iostream.h</span></code>
documentation; attempts to make <code class="docutils literal notranslate"><span class="pre">py::scoped_ostream_redirect</span></code> thread safe
have been removed, as it was only partially effective.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2995">#2995</a></p></li>
</ul>
<p>Fixes:</p>
<ul class="simple">
<li><p>Performance: avoid unnecessary strlen calls.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3058">#3058</a></p></li>
<li><p>Fix auto-generated documentation string when using <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">T</span></code> in
<code class="docutils literal notranslate"><span class="pre">pyarray_t</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3020">#3020</a></p></li>
<li><p>Unify error messages thrown by <code class="docutils literal notranslate"><span class="pre">simple_collector</span></code>/<code class="docutils literal notranslate"><span class="pre">unpacking_collector</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3013">#3013</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11::builtin_exception</span></code> is now explicitly exported, which means the
types included/defined in different modules are identical, and exceptions
raised in different modules can be caught correctly. The documentation was
updated to explain that custom exceptions that are used across module
boundaries need to be explicitly exported as well.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2999">#2999</a></p></li>
<li><p>Fixed exception when printing UTF-8 to a <code class="docutils literal notranslate"><span class="pre">scoped_ostream_redirect</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2982">#2982</a></p></li>
<li><p>Pickle support enhancement: <code class="docutils literal notranslate"><span class="pre">setstate</span></code> implementation will attempt to
<code class="docutils literal notranslate"><span class="pre">setattr</span></code> <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> only if the unpickled <code class="docutils literal notranslate"><span class="pre">dict</span></code> object is not empty,
to not force use of <code class="docutils literal notranslate"><span class="pre">py::dynamic_attr()</span></code> unnecessarily.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2972">#2972</a></p></li>
<li><p>Allow negative timedelta values to roundtrip.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2870">#2870</a></p></li>
<li><p>Fix unchecked errors could potentially swallow signals/other exceptions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2863">#2863</a></p></li>
<li><p>Add null pointer check with <code class="docutils literal notranslate"><span class="pre">std::localtime</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2846">#2846</a></p></li>
<li><p>Fix the <code class="docutils literal notranslate"><span class="pre">weakref</span></code> constructor from <code class="docutils literal notranslate"><span class="pre">py::object</span></code> to create a new
<code class="docutils literal notranslate"><span class="pre">weakref</span></code> on conversion.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2832">#2832</a></p></li>
<li><p>Avoid relying on exceptions in C++17 when getting a <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code> holder
from a <code class="docutils literal notranslate"><span class="pre">shared_from_this</span></code> class.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2819">#2819</a></p></li>
<li><p>Allow the codec’s exception to be raised instead of <code class="code docutils literal notranslate"><span class="pre">RuntimeError</span></code> when
casting from <code class="code docutils literal notranslate"><span class="pre">py::str</span></code> to <code class="code docutils literal notranslate"><span class="pre">std::string</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2903">#2903</a></p></li>
</ul>
<p>Build system improvements:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">setup_helpers.py</span></code>, test for platforms that have some multiprocessing
features but lack semaphores, which <code class="docutils literal notranslate"><span class="pre">ParallelCompile</span></code> requires.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3043">#3043</a></p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">pybind11_INCLUDE_DIR</span></code> in case <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_INCLUDEDIR</span></code> is
absolute.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3005">#3005</a></p></li>
<li><p>Fix bug not respecting <code class="docutils literal notranslate"><span class="pre">WITH_SOABI</span></code> or <code class="docutils literal notranslate"><span class="pre">WITHOUT_SOABI</span></code> to CMake.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2938">#2938</a></p></li>
<li><p>Fix the default <code class="docutils literal notranslate"><span class="pre">Pybind11Extension</span></code> compilation flags with a Mingw64 python.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2921">#2921</a></p></li>
<li><p>Clang on Windows: do not pass <code class="docutils literal notranslate"><span class="pre">/MP</span></code> (ignored flag).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2824">#2824</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11.setup_helpers.intree_extensions</span></code> can be used to generate
<code class="docutils literal notranslate"><span class="pre">Pybind11Extension</span></code> instances from cpp files placed in the Python package
source tree.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2831">#2831</a></p></li>
</ul>
<p>Backend and tidying up:</p>
<ul class="simple">
<li><p>Enable clang-tidy performance, readability, and modernization checks
throughout the codebase to enforce best coding practices.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3046">#3046</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3049">#3049</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3051">#3051</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3052">#3052</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3080">#3080</a>, and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3094">#3094</a></p></li>
<li><p>Checks for common misspellings were added to the pre-commit hooks.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3076">#3076</a></p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">Werror</span></code> to stricter <code class="docutils literal notranslate"><span class="pre">Werror-all</span></code> for Intel compiler and fixed
minor issues.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2948">#2948</a></p></li>
<li><p>Fixed compilation with GCC &lt; 5 when the user defines <code class="docutils literal notranslate"><span class="pre">_GLIBCXX_USE_CXX11_ABI</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2956">#2956</a></p></li>
<li><p>Added nox support for easier local testing and linting of contributions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3101">#3101</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3121">#3121</a></p></li>
<li><p>Avoid RTD style issue with docutils 0.17+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3119">#3119</a></p></li>
<li><p>Support pipx run, such as <code class="docutils literal notranslate"><span class="pre">pipx</span> <span class="pre">run</span> <span class="pre">pybind11</span> <span class="pre">--include</span></code> for a quick compile.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/3117">#3117</a></p></li>
</ul>
</section>
<section id="v2-6-2-jan-26-2021">
<h2>v2.6.2 (Jan 26, 2021)<a class="headerlink" href="#v2-6-2-jan-26-2021" title="Link to this heading"></a></h2>
<p>Minor missing functionality added:</p>
<ul class="simple">
<li><p>enum: add missing Enum.value property.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2739">#2739</a></p></li>
<li><p>Allow thread termination to be avoided during shutdown for CPython 3.7+ via
<code class="docutils literal notranslate"><span class="pre">.disarm</span></code> for <code class="docutils literal notranslate"><span class="pre">gil_scoped_acquire</span></code>/<code class="docutils literal notranslate"><span class="pre">gil_scoped_release</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2657">#2657</a></p></li>
</ul>
<p>Fixed or improved behavior in a few special cases:</p>
<ul class="simple">
<li><p>Fix bug where the constructor of <code class="docutils literal notranslate"><span class="pre">object</span></code> subclasses would not throw on
being passed a Python object of the wrong type.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2701">#2701</a></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">type_caster</span></code> for integers does not convert Python objects with
<code class="docutils literal notranslate"><span class="pre">__int__</span></code> anymore with <code class="docutils literal notranslate"><span class="pre">noconvert</span></code> or during the first round of trying
overloads.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2698">#2698</a></p></li>
<li><p>When casting to a C++ integer, <code class="docutils literal notranslate"><span class="pre">__index__</span></code> is always called and not
considered as conversion, consistent with Python 3.8+.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2801">#2801</a></p></li>
</ul>
<p>Build improvements:</p>
<ul class="simple">
<li><p>Setup helpers: <code class="docutils literal notranslate"><span class="pre">extra_compile_args</span></code> and <code class="docutils literal notranslate"><span class="pre">extra_link_args</span></code> automatically set by
Pybind11Extension are now prepended, which allows them to be overridden
by user-set <code class="docutils literal notranslate"><span class="pre">extra_compile_args</span></code> and <code class="docutils literal notranslate"><span class="pre">extra_link_args</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2808">#2808</a></p></li>
<li><p>Setup helpers: Don’t trigger unused parameter warning.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2735">#2735</a></p></li>
<li><p>CMake: Support running with <code class="docutils literal notranslate"><span class="pre">--warn-uninitialized</span></code> active.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2806">#2806</a></p></li>
<li><p>CMake: Avoid error if included from two submodule directories.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2804">#2804</a></p></li>
<li><p>CMake: Fix <code class="docutils literal notranslate"><span class="pre">STATIC</span></code> / <code class="docutils literal notranslate"><span class="pre">SHARED</span></code> being ignored in FindPython mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2796">#2796</a></p></li>
<li><p>CMake: Respect the setting for <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_VISIBILITY_PRESET</span></code> if defined.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2793">#2793</a></p></li>
<li><p>CMake: Fix issue with FindPython2/FindPython3 not working with <code class="docutils literal notranslate"><span class="pre">pybind11::embed</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2662">#2662</a></p></li>
<li><p>CMake: mixing local and installed pybind11’s would prioritize the installed
one over the local one (regression in 2.6.0).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2716">#2716</a></p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>Fixed segfault in multithreaded environments when using
<code class="docutils literal notranslate"><span class="pre">scoped_ostream_redirect</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2675">#2675</a></p></li>
<li><p>Leave docstring unset when all docstring-related options are disabled, rather
than set an empty string.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2745">#2745</a></p></li>
<li><p>The module key in builtins that pybind11 uses to store its internals changed
from std::string to a python str type (more natural on Python 2, no change on
Python 3).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2814">#2814</a></p></li>
<li><p>Fixed assertion error related to unhandled (later overwritten) exception in
CPython 3.8 and 3.9 debug builds.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2685">#2685</a></p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">py::gil_scoped_acquire</span></code> assert with CPython 3.9 debug build.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2683">#2683</a></p></li>
<li><p>Fix issue with a test failing on pytest 6.2.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2741">#2741</a></p></li>
</ul>
<p>Warning fixes:</p>
<ul class="simple">
<li><p>Fix warning modifying constructor parameter ‘flag’ that shadows a field of
‘set_flag’ <code class="docutils literal notranslate"><span class="pre">[-Wshadow-field-in-constructor-modified]</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2780">#2780</a></p></li>
<li><p>Suppressed some deprecation warnings about old-style
<code class="docutils literal notranslate"><span class="pre">__init__</span></code>/<code class="docutils literal notranslate"><span class="pre">__setstate__</span></code> in the tests.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2759">#2759</a></p></li>
</ul>
<p>Valgrind work:</p>
<ul class="simple">
<li><p>Fix invalid access when calling a pybind11 <code class="docutils literal notranslate"><span class="pre">__init__</span></code> on a non-pybind11
class instance.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2755">#2755</a></p></li>
<li><p>Fixed various minor memory leaks in pybind11’s test suite.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2758">#2758</a></p></li>
<li><p>Resolved memory leak in cpp_function initialization when exceptions occurred.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2756">#2756</a></p></li>
<li><p>Added a Valgrind build, checking for leaks and memory-related UB, to CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2746">#2746</a></p></li>
</ul>
<p>Compiler support:</p>
<ul class="simple">
<li><p>Intel compiler was not activating C++14 support due to a broken define.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2679">#2679</a></p></li>
<li><p>Support ICC and NVIDIA HPC SDK in C++17 mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2729">#2729</a></p></li>
<li><p>Support Intel OneAPI compiler (ICC 20.2) and add to CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2573">#2573</a></p></li>
</ul>
</section>
<section id="v2-6-1-nov-11-2020">
<h2>v2.6.1 (Nov 11, 2020)<a class="headerlink" href="#v2-6-1-nov-11-2020" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py::exec</span></code>, <code class="docutils literal notranslate"><span class="pre">py::eval</span></code>, and <code class="docutils literal notranslate"><span class="pre">py::eval_file</span></code> now add the builtins module
as <code class="docutils literal notranslate"><span class="pre">&quot;__builtins__&quot;</span></code> to their <code class="docutils literal notranslate"><span class="pre">globals</span></code> argument, better matching <code class="docutils literal notranslate"><span class="pre">exec</span></code>
and <code class="docutils literal notranslate"><span class="pre">eval</span></code> in pure Python.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2616">#2616</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_helpers</span></code> will no longer set a minimum macOS version higher than the
current version.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2622">#2622</a></p></li>
<li><p>Allow deleting static properties.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2629">#2629</a></p></li>
<li><p>Seal a leak in <code class="docutils literal notranslate"><span class="pre">def_buffer</span></code>, cleaning up the <code class="docutils literal notranslate"><span class="pre">capture</span></code> object after the
<code class="docutils literal notranslate"><span class="pre">class_</span></code> object goes out of scope.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2634">#2634</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11_INCLUDE_DIRS</span></code> was incorrect, potentially causing a regression if
it was expected to include <code class="docutils literal notranslate"><span class="pre">PYTHON_INCLUDE_DIRS</span></code> (please use targets
instead).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2636">#2636</a></p></li>
<li><p>Added parameter names to the <code class="docutils literal notranslate"><span class="pre">py::enum_</span></code> constructor and methods, avoiding
<code class="docutils literal notranslate"><span class="pre">arg0</span></code> in the generated docstrings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2637">#2637</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">needs_recompile</span></code> optional function to the <code class="docutils literal notranslate"><span class="pre">ParallelCompiler</span></code>
helper, to allow a recompile to be skipped based on a user-defined function.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2643">#2643</a></p></li>
</ul>
</section>
<section id="v2-6-0-oct-21-2020">
<h2>v2.6.0 (Oct 21, 2020)<a class="headerlink" href="#v2-6-0-oct-21-2020" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="upgrade.html#upgrade-guide-2-6"><span class="std std-ref">v2.6</span></a> for help upgrading to the new version.</p>
<p>New features:</p>
<ul class="simple">
<li><p>Keyword-only arguments supported in Python 2 or 3 with <code class="docutils literal notranslate"><span class="pre">py::kw_only()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2100">#2100</a></p></li>
<li><p>Positional-only arguments supported in Python 2 or 3 with <code class="docutils literal notranslate"><span class="pre">py::pos_only()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2459">#2459</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::is_final()</span></code> class modifier to block subclassing (CPython only).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2151">#2151</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::prepend()</span></code>, allowing a function to be placed at the beginning of
the overload chain.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1131">#1131</a></p></li>
<li><p>Access to the type object now provided with <code class="docutils literal notranslate"><span class="pre">py::type::of&lt;T&gt;()</span></code> and
<code class="docutils literal notranslate"><span class="pre">py::type::of(h)</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2364">#2364</a></p></li>
<li><p>Perfect forwarding support for methods.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2048">#2048</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::error_already_set::discard_as_unraisable()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2372">#2372</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::hash</span></code> is now public.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2217">#2217</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::class_&lt;union_type&gt;</span></code> is now supported. Note that writing to one data
member of the union and reading another (type punning) is UB in C++. Thus
pybind11-bound enums should never be used for such conversions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2320">#2320</a>.</p></li>
<li><p>Classes now check local scope when registering members, allowing a subclass
to have a member with the same name as a parent (such as an enum).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2335">#2335</a></p></li>
</ul>
<p>Code correctness features:</p>
<ul class="simple">
<li><p>Error now thrown when <code class="docutils literal notranslate"><span class="pre">__init__</span></code> is forgotten on subclasses.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2152">#2152</a></p></li>
<li><p>Throw error if conversion to a pybind11 type if the Python object isn’t a
valid instance of that type, such as <code class="docutils literal notranslate"><span class="pre">py::bytes(o)</span></code> when <code class="docutils literal notranslate"><span class="pre">py::object</span> <span class="pre">o</span></code>
isn’t a bytes instance.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2349">#2349</a></p></li>
<li><p>Throw if conversion to <code class="docutils literal notranslate"><span class="pre">str</span></code> fails.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2477">#2477</a></p></li>
</ul>
<p>API changes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py::module</span></code> was renamed <code class="docutils literal notranslate"><span class="pre">py::module_</span></code> to avoid issues with C++20 when
used unqualified, but an alias <code class="docutils literal notranslate"><span class="pre">py::module</span></code> is provided for backward
compatibility.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2489">#2489</a></p></li>
<li><p>Public constructors for <code class="docutils literal notranslate"><span class="pre">py::module_</span></code> have been deprecated; please use
<code class="docutils literal notranslate"><span class="pre">pybind11::module_::create_extension_module</span></code> if you were using the public
constructor (fairly rare after <code class="docutils literal notranslate"><span class="pre">PYBIND11_MODULE</span></code> was introduced).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2552">#2552</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_OVERLOAD*</span></code> macros and <code class="docutils literal notranslate"><span class="pre">get_overload</span></code> function replaced by
correctly-named <code class="docutils literal notranslate"><span class="pre">PYBIND11_OVERRIDE*</span></code> and <code class="docutils literal notranslate"><span class="pre">get_override</span></code>, fixing
inconsistencies in the presence of a closing <code class="docutils literal notranslate"><span class="pre">;</span></code> in these macros.
<code class="docutils literal notranslate"><span class="pre">get_type_overload</span></code> is deprecated.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2325">#2325</a></p></li>
</ul>
<p>Packaging / building improvements:</p>
<ul class="simple">
<li><p>The Python package was reworked to be more powerful and useful.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2433">#2433</a></p>
<ul>
<li><p><a class="reference internal" href="compiling.html#build-setuptools"><span class="std std-ref">Modules with setuptools</span></a> is easier thanks to a new
<code class="docutils literal notranslate"><span class="pre">pybind11.setup_helpers</span></code> module, which provides utilities to use
setuptools with pybind11. It can be used via PEP 518, <code class="docutils literal notranslate"><span class="pre">setup_requires</span></code>,
or by directly importing or copying <code class="docutils literal notranslate"><span class="pre">setup_helpers.py</span></code> into your project.</p></li>
<li><p>CMake configuration files are now included in the Python package. Use
<code class="docutils literal notranslate"><span class="pre">pybind11.get_cmake_dir()</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pybind11</span> <span class="pre">--cmakedir</span></code> to get
the directory with the CMake configuration files, or include the
site-packages location in your <code class="docutils literal notranslate"><span class="pre">CMAKE_MODULE_PATH</span></code>. Or you can use the
new <code class="docutils literal notranslate"><span class="pre">pybind11[global]</span></code> extra when you install <code class="docutils literal notranslate"><span class="pre">pybind11</span></code>, which
installs the CMake files and headers into your base environment in the
standard location.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11-config</span></code> is another way to write <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pybind11</span></code> if you
have your PATH set up.</p></li>
<li><p>Added external typing support to the helper module, code from
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pybind11</span></code> can now be type checked.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2588">#2588</a></p></li>
</ul>
</li>
<li><p>Minimum CMake required increased to 3.4.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2338">#2338</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2370">#2370</a></p>
<ul>
<li><p>Full integration with CMake’s C++ standard system and compile features
replaces <code class="docutils literal notranslate"><span class="pre">PYBIND11_CPP_STANDARD</span></code>.</p></li>
<li><p>Generated config file is now portable to different Python/compiler/CMake
versions.</p></li>
<li><p>Virtual environments prioritized if <code class="docutils literal notranslate"><span class="pre">PYTHON_EXECUTABLE</span></code> is not set
(<code class="docutils literal notranslate"><span class="pre">venv</span></code>, <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>, and <code class="docutils literal notranslate"><span class="pre">conda</span></code>) (similar to the new FindPython
mode).</p></li>
<li><p>Other CMake features now natively supported, like
<code class="docutils literal notranslate"><span class="pre">CMAKE_INTERPROCEDURAL_OPTIMIZATION</span></code>, <code class="docutils literal notranslate"><span class="pre">set(CMAKE_CXX_VISIBILITY_PRESET</span>
<span class="pre">hidden)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CUDA</span></code> as a language is now supported.</p></li>
<li><p>Helper functions <code class="docutils literal notranslate"><span class="pre">pybind11_strip</span></code>, <code class="docutils literal notranslate"><span class="pre">pybind11_extension</span></code>,
<code class="docutils literal notranslate"><span class="pre">pybind11_find_import</span></code> added, see <a class="reference internal" href="cmake/index.html"><span class="doc">CMake helpers</span></a>.</p></li>
<li><p>Optional <a class="reference internal" href="compiling.html#find-python-mode"><span class="std std-ref">FindPython mode</span></a> and <a class="reference internal" href="compiling.html#nopython-mode"><span class="std std-ref">Advanced: NOPYTHON mode</span></a> with CMake.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2370">#2370</a></p></li>
</ul>
</li>
<li><p>Uninstall target added.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2265">#2265</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2346">#2346</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11_add_module()</span></code> now accepts an optional <code class="docutils literal notranslate"><span class="pre">OPT_SIZE</span></code> flag that
switches the binding target to size-based optimization if the global build
type can not always be fixed to <code class="docutils literal notranslate"><span class="pre">MinSizeRel</span></code> (except in debug mode, where
optimizations remain disabled).  <code class="docutils literal notranslate"><span class="pre">MinSizeRel</span></code> or this flag reduces binary
size quite substantially (~25% on some platforms).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2463">#2463</a></p></li>
</ul>
<p>Smaller or developer focused features and fixes:</p>
<ul class="simple">
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">mkdoc.py</span></code> to a new repo, <a class="reference external" href="https://github.com/pybind/pybind11-mkdoc">pybind11-mkdoc</a>. There are no longer
submodules in the main repo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::memoryview</span></code> segfault fix and update, with new
<code class="docutils literal notranslate"><span class="pre">py::memoryview::from_memory</span></code> in Python 3, and documentation.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2223">#2223</a></p></li>
<li><p>Fix for <code class="docutils literal notranslate"><span class="pre">buffer_info</span></code> on Python 2.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2503">#2503</a></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> defined but not <code class="docutils literal notranslate"><span class="pre">__hash__</span></code>, <code class="docutils literal notranslate"><span class="pre">__hash__</span></code> is now set to
<code class="docutils literal notranslate"><span class="pre">None</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2291">#2291</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::ellipsis</span></code> now also works on Python 2.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2360">#2360</a></p></li>
<li><p>Pointer to <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">std::pair</span></code> supported in cast.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2334">#2334</a></p></li>
<li><p>Small fixes in NumPy support. <code class="docutils literal notranslate"><span class="pre">py::array</span></code> now uses <code class="docutils literal notranslate"><span class="pre">py::ssize_t</span></code> as first
argument type.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2293">#2293</a></p></li>
<li><p>Added missing signature for <code class="docutils literal notranslate"><span class="pre">py::array</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2363">#2363</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unchecked_mutable_reference</span></code> has access to operator <code class="docutils literal notranslate"><span class="pre">()</span></code> and <code class="docutils literal notranslate"><span class="pre">[]</span></code> when
const.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2514">#2514</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::vectorize</span></code> is now supported on functions that return void.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1969">#1969</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::capsule</span></code> supports <code class="docutils literal notranslate"><span class="pre">get_pointer</span></code> and <code class="docutils literal notranslate"><span class="pre">set_pointer</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1131">#1131</a></p></li>
<li><p>Fix crash when different instances share the same pointer of the same type.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2252">#2252</a></p></li>
<li><p>Fix for <code class="docutils literal notranslate"><span class="pre">py::len</span></code> not clearing Python’s error state when it fails and throws.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2575">#2575</a></p></li>
<li><p>Bugfixes related to more extensive testing, new GitHub Actions CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2321">#2321</a></p></li>
<li><p>Bug in timezone issue in Eastern hemisphere midnight fixed.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2438">#2438</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::chrono::time_point</span></code> now works when the resolution is not the same as
the system.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2481">#2481</a></p></li>
<li><p>Bug fixed where <code class="docutils literal notranslate"><span class="pre">py::array_t</span></code> could accept arrays that did not match the
requested ordering.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2484">#2484</a></p></li>
<li><p>Avoid a segfault on some compilers when types are removed in Python.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2564">#2564</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::arg::none()</span></code> is now also respected when passing keyword arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2611">#2611</a></p></li>
<li><p>PyPy fixes, PyPy 7.3.x now supported, including PyPy3. (Known issue with
PyPy2 and Windows <a class="reference external" href="https://github.com/pybind/pybind11/issues/2596">#2596</a>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2146">#2146</a></p></li>
<li><p>CPython 3.9.0 workaround for undefined behavior (macOS segfault).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2576">#2576</a></p></li>
<li><p>CPython 3.9 warning fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2253">#2253</a></p></li>
<li><p>Improved C++20 support, now tested in CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2489">#2489</a>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2599">#2599</a></p></li>
<li><p>Improved but still incomplete debug Python interpreter support.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2025">#2025</a></p></li>
<li><p>NVCC (CUDA 11) now supported and tested in CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2461">#2461</a></p></li>
<li><p>NVIDIA PGI compilers now supported and tested in CI.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2475">#2475</a></p></li>
<li><p>At least Intel 18 now explicitly required when compiling with Intel.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2577">#2577</a></p></li>
<li><p>Extensive style checking in CI, with <a class="reference external" href="https://pre-commit.com">pre-commit</a> support. Code
modernization, checked by clang-tidy.</p></li>
<li><p>Expanded docs, including new main page, new installing section, and CMake
helpers page, along with over a dozen new sections on existing pages.</p></li>
<li><p>In GitHub, new docs for contributing and new issue templates.</p></li>
</ul>
</section>
<section id="v2-5-0-mar-31-2020">
<h2>v2.5.0 (Mar 31, 2020)<a class="headerlink" href="#v2-5-0-mar-31-2020" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Use C++17 fold expressions in type casters, if available. This can
improve performance during overload resolution when functions have
multiple arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2043">#2043</a>.</p></li>
<li><p>Changed include directory resolution in <code class="docutils literal notranslate"><span class="pre">pybind11/__init__.py</span></code>
and installation in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>. This fixes a number of open issues
where pybind11 headers could not be found in certain environments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1995">#1995</a>.</p></li>
<li><p>C++20 <code class="docutils literal notranslate"><span class="pre">char8_t</span></code> and <code class="docutils literal notranslate"><span class="pre">u8string</span></code> support. <a class="reference external" href="https://github.com/pybind/pybind11/pull/2026">#2026</a>.</p></li>
<li><p>CMake: search for Python 3.9. <a class="reference external" href="https://github.com/pybind/pybind11/commit/bb9c91">bb9c91</a>.</p></li>
<li><p>Fixes for MSYS-based build environments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2087">#2087</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2053">#2053</a>.</p></li>
<li><p>STL bindings for <code class="docutils literal notranslate"><span class="pre">std::vector&lt;...&gt;::clear</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/2074">#2074</a>.</p></li>
<li><p>Read-only flag for <code class="docutils literal notranslate"><span class="pre">py::buffer</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1466">#1466</a>.</p></li>
<li><p>Exception handling during module initialization.
<a class="reference external" href="https://github.com/pybind/pybind11/commit/bf2b031">bf2b031</a>.</p></li>
<li><p>Support linking against a CPython debug build.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2025">#2025</a>.</p></li>
<li><p>Fixed issues involving the availability and use of aligned <code class="docutils literal notranslate"><span class="pre">new</span></code> and
<code class="docutils literal notranslate"><span class="pre">delete</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1988">#1988</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/commit/759221">759221</a>.</p></li>
<li><p>Fixed a resource leak upon interpreter shutdown.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/2020">#2020</a>.</p></li>
<li><p>Fixed error handling in the boolean caster.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1976">#1976</a>.</p></li>
</ul>
</section>
<section id="v2-4-3-oct-15-2019">
<h2>v2.4.3 (Oct 15, 2019)<a class="headerlink" href="#v2-4-3-oct-15-2019" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Adapt pybind11 to a C API convention change in Python 3.8. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1950">#1950</a>.</p></li>
</ul>
</section>
<section id="v2-4-2-sep-21-2019">
<h2>v2.4.2 (Sep 21, 2019)<a class="headerlink" href="#v2-4-2-sep-21-2019" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Replaced usage of a C++14 only construct. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1929">#1929</a>.</p></li>
<li><p>Made an ifdef future-proof for Python &gt;= 4. <a class="reference external" href="https://github.com/pybind/pybind11/commit/f3109d">f3109d</a>.</p></li>
</ul>
</section>
<section id="v2-4-1-sep-20-2019">
<h2>v2.4.1 (Sep 20, 2019)<a class="headerlink" href="#v2-4-1-sep-20-2019" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed a problem involving implicit conversion from enumerations to integers
on Python 3.8. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1780">#1780</a>.</p></li>
</ul>
</section>
<section id="v2-4-0-sep-19-2019">
<h2>v2.4.0 (Sep 19, 2019)<a class="headerlink" href="#v2-4-0-sep-19-2019" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Try harder to keep pybind11-internal data structures separate when there
are potential ABI incompatibilities. Fixes crashes that occurred when loading
multiple pybind11 extensions that were e.g. compiled by GCC (libstdc++)
and Clang (libc++).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1588">#1588</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/commit/c9f5a">c9f5a</a>.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">__await__</span></code>, <code class="docutils literal notranslate"><span class="pre">__aiter__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__anext__</span></code> protocols.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1842">#1842</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11_add_module()</span></code>: don’t strip symbols when compiling in
<code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code> mode. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1980">#1980</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enum_</span></code>: Reproduce Python behavior when comparing against invalid values
(e.g. <code class="docutils literal notranslate"><span class="pre">None</span></code>, strings, etc.). Add back support for <code class="docutils literal notranslate"><span class="pre">__invert__()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1912">#1912</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1907">#1907</a>.</p></li>
<li><p>List insertion operation for <code class="docutils literal notranslate"><span class="pre">py::list</span></code>.
Added <code class="docutils literal notranslate"><span class="pre">.empty()</span></code> to all collection types.
Added <code class="docutils literal notranslate"><span class="pre">py::set::contains()</span></code> and <code class="docutils literal notranslate"><span class="pre">py::dict::contains()</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1887">#1887</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1884">#1884</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1888">#1888</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::details::overload_cast_impl</span></code> is available in C++11 mode, can be used
like <code class="docutils literal notranslate"><span class="pre">overload_cast</span></code> with an additional set of parentheses.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1581">#1581</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">get_include()</span></code> on Conda.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1877">#1877</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stl_bind.h</span></code>: negative indexing support.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1882">#1882</a>.</p></li>
<li><p>Minor CMake fix to add MinGW compatibility.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1851">#1851</a>.</p></li>
<li><p>GIL-related fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1836">#1836</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/commit/8b90b">8b90b</a>.</p></li>
<li><p>Other very minor/subtle fixes and improvements.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1329">#1329</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1910">#1910</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1863">#1863</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1847">#1847</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1890">#1890</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1860">#1860</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1848">#1848</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1821">#1821</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1837">#1837</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1833">#1833</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1748">#1748</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1852">#1852</a>.</p></li>
</ul>
</section>
<section id="v2-3-0-june-11-2019">
<h2>v2.3.0 (June 11, 2019)<a class="headerlink" href="#v2-3-0-june-11-2019" title="Link to this heading"></a></h2>
<ul>
<li><p>Significantly reduced module binary size (10-20%) when compiled in C++11 mode
with GCC/Clang, or in any mode with MSVC. Function signatures are now always
precomputed at compile time (this was previously only available in C++14 mode
for non-MSVC compilers).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/934">#934</a>.</p></li>
<li><p>Add basic support for tag-based static polymorphism, where classes
provide a method to returns the desired type of an instance.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1326">#1326</a>.</p></li>
<li><p>Python type wrappers (<code class="docutils literal notranslate"><span class="pre">py::handle</span></code>, <code class="docutils literal notranslate"><span class="pre">py::object</span></code>, etc.)
now support map Python’s number protocol onto C++ arithmetic
operators such as <code class="docutils literal notranslate"><span class="pre">operator+</span></code>, <code class="docutils literal notranslate"><span class="pre">operator/=</span></code>, etc.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1511">#1511</a>.</p></li>
<li><p>A number of improvements related to enumerations:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">enum_</span></code> implementation was rewritten from scratch to reduce
code bloat. Rather than instantiating a full implementation for each
enumeration, most code is now contained in a generic base class.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1511">#1511</a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">value()</span></code>  method of <code class="docutils literal notranslate"><span class="pre">py::enum_</span></code> now accepts an optional
docstring that will be shown in the documentation of the associated
enumeration. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1160">#1160</a>.</p></li>
<li><p>check for already existing enum value and throw an error if present.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1453">#1453</a>.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Support for over-aligned type allocation via C++17’s aligned <code class="docutils literal notranslate"><span class="pre">new</span></code>
statement. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1582">#1582</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::ellipsis()</span></code> method for slicing of multidimensional NumPy arrays
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1502">#1502</a>.</p></li>
<li><p>Numerous Improvements to the <code class="docutils literal notranslate"><span class="pre">mkdoc.py</span></code> script for extracting documentation
from C++ header files.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1788">#1788</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11_add_module()</span></code>: allow including Python as a <code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code> include path.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1416">#1416</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pybind11/stl.h</span></code> does not convert strings to <code class="docutils literal notranslate"><span class="pre">vector&lt;string&gt;</span></code> anymore.
<a class="reference external" href="https://github.com/pybind/pybind11/issues/1258">#1258</a>.</p></li>
<li><p>Mark static methods as such to fix auto-generated Sphinx documentation.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1732">#1732</a>.</p></li>
<li><p>Re-throw forced unwind exceptions (e.g. during pthread termination).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1208">#1208</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__contains__</span></code> method to the bindings of maps (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1767">#1767</a>.</p></li>
<li><p>Improvements to <code class="docutils literal notranslate"><span class="pre">gil_scoped_acquire</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1211">#1211</a>.</p></li>
<li><p>Type caster support for <code class="docutils literal notranslate"><span class="pre">std::deque&lt;T&gt;</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1609">#1609</a>.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> holders, whose deleters differ between a base and derived
class. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1353">#1353</a>.</p></li>
<li><p>Construction of STL array/vector-like data structures from
iterators. Added an <code class="docutils literal notranslate"><span class="pre">extend()</span></code> operation.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1709">#1709</a>,</p></li>
<li><p>CMake build system improvements for projects that include non-C++
files (e.g. plain C, CUDA) in <code class="docutils literal notranslate"><span class="pre">pybind11_add_module</span></code> et al.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1678">#1678</a>.</p></li>
<li><p>Fixed asynchronous invocation and deallocation of Python functions
wrapped in <code class="docutils literal notranslate"><span class="pre">std::function</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1595">#1595</a>.</p></li>
<li><p>Fixes regarding return value policy propagation in STL type casters.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1603">#1603</a>.</p></li>
<li><p>Fixed scoped enum comparisons.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1571">#1571</a>.</p></li>
<li><p>Fixed iostream redirection for code that releases the GIL.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1368">#1368</a>,</p></li>
<li><p>A number of CI-related fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1757">#1757</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1744">#1744</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1670">#1670</a>.</p></li>
</ul>
</section>
<section id="v2-2-4-september-11-2018">
<h2>v2.2.4 (September 11, 2018)<a class="headerlink" href="#v2-2-4-september-11-2018" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Use new Python 3.7 Thread Specific Storage (TSS) implementation if available.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1454">#1454</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1517">#1517</a>.</p></li>
<li><p>Fixes for newer MSVC versions and C++17 mode.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1347">#1347</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1462">#1462</a>.</p></li>
<li><p>Propagate return value policies to type-specific casters
when casting STL containers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1455">#1455</a>.</p></li>
<li><p>Allow ostream-redirection of more than 1024 characters.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1479">#1479</a>.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> define when compiling against a debug Python build.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1438">#1438</a>.</p></li>
<li><p>Untangle integer logic in number type caster to work for custom
types that may only be castable to a restricted set of builtin types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1442">#1442</a>.</p></li>
<li><p>CMake build system: Remember Python version in cache file.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1434">#1434</a>.</p></li>
<li><p>Fix for custom smart pointers: use <code class="docutils literal notranslate"><span class="pre">std::addressof</span></code> to obtain holder
address instead of <code class="docutils literal notranslate"><span class="pre">operator&amp;</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1435">#1435</a>.</p></li>
<li><p>Properly report exceptions thrown during module initialization.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1362">#1362</a>.</p></li>
<li><p>Fixed a segmentation fault when creating empty-shaped NumPy array.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1371">#1371</a>.</p></li>
<li><p>The version of Intel C++ compiler must be &gt;= 2017, and this is now checked by
the header files. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1363">#1363</a>.</p></li>
<li><p>A few minor typo fixes and improvements to the test suite, and
patches that silence compiler warnings.</p></li>
<li><p>Vectors now support construction from generators, as well as <code class="docutils literal notranslate"><span class="pre">extend()</span></code> from a
list or generator.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1496">#1496</a>.</p></li>
</ul>
</section>
<section id="v2-2-3-april-29-2018">
<h2>v2.2.3 (April 29, 2018)<a class="headerlink" href="#v2-2-3-april-29-2018" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The pybind11 header location detection was replaced by a new implementation
that no longer depends on <code class="docutils literal notranslate"><span class="pre">pip</span></code> internals (the recently released <code class="docutils literal notranslate"><span class="pre">pip</span></code>
10 has restricted access to this API).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1190">#1190</a>.</p></li>
<li><p>Small adjustment to an implementation detail to work around a compiler segmentation fault in Clang 3.3/3.4.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1350">#1350</a>.</p></li>
<li><p>The minimal supported version of the Intel compiler was &gt;= 17.0 since
pybind11 v2.1. This check is now explicit, and a compile-time error is raised
if the compiler meet the requirement.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1363">#1363</a>.</p></li>
<li><p>Fixed an endianness-related fault in the test suite.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1287">#1287</a>.</p></li>
</ul>
</section>
<section id="v2-2-2-february-7-2018">
<h2>v2.2.2 (February 7, 2018)<a class="headerlink" href="#v2-2-2-february-7-2018" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed a segfault when combining embedded interpreter
shutdown/reinitialization with external loaded pybind11 modules.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1092">#1092</a>.</p></li>
<li><p>Eigen support: fixed a bug where Nx1/1xN numpy inputs couldn’t be passed as
arguments to Eigen vectors (which for Eigen are simply compile-time fixed
Nx1/1xN matrices).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1106">#1106</a>.</p></li>
<li><p>Clarified to license by moving the licensing of contributions from
<code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> into <code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code>: the licensing of contributions is not
actually part of the software license as distributed.  This isn’t meant to be
a substantial change in the licensing of the project, but addresses concerns
that the clause made the license non-standard.
<a class="reference external" href="https://github.com/pybind/pybind11/issues/1109">#1109</a>.</p></li>
<li><p>Fixed a regression introduced in 2.1 that broke binding functions with lvalue
character literal arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1128">#1128</a>.</p></li>
<li><p>MSVC: fix for compilation failures under /permissive-, and added the flag to
the appveyor test suite.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1155">#1155</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> generation, and in turn, fixes how class names
(especially nested class names) are shown in generated docstrings.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1171">#1171</a>.</p></li>
<li><p>Updated the FAQ with a suggested project citation reference.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1189">#1189</a>.</p></li>
<li><p>Added fixes for deprecation warnings when compiled under C++17 with
<code class="docutils literal notranslate"><span class="pre">-Wdeprecated</span></code> turned on, and add <code class="docutils literal notranslate"><span class="pre">-Wdeprecated</span></code> to the test suite
compilation flags.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1191">#1191</a>.</p></li>
<li><p>Fixed outdated PyPI URLs in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1213">#1213</a>.</p></li>
<li><p>Fixed a refcount leak for arguments that end up in a <code class="docutils literal notranslate"><span class="pre">py::args</span></code> argument
for functions with both fixed positional and <code class="docutils literal notranslate"><span class="pre">py::args</span></code> arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1216">#1216</a>.</p></li>
<li><p>Fixed a potential segfault resulting from possible premature destruction of
<code class="docutils literal notranslate"><span class="pre">py::args</span></code>/<code class="docutils literal notranslate"><span class="pre">py::kwargs</span></code> arguments with overloaded functions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1223">#1223</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">map[item]</span></code> for a <code class="docutils literal notranslate"><span class="pre">stl_bind.h</span></code> bound stl map.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1229">#1229</a>.</p></li>
<li><p>Fixed a regression from v2.1.x where the aggregate initialization could
unintentionally end up at a constructor taking a templated
<code class="docutils literal notranslate"><span class="pre">std::initializer_list&lt;T&gt;</span></code> argument.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1249">#1249</a>.</p></li>
<li><p>Fixed an issue where calling a function with a keep_alive policy on the same
nurse/patient pair would cause the internal patient storage to needlessly
grow (unboundedly, if the nurse is long-lived).
<a class="reference external" href="https://github.com/pybind/pybind11/issues/1251">#1251</a>.</p></li>
<li><p>Various other minor fixes.</p></li>
</ul>
</section>
<section id="v2-2-1-september-14-2017">
<h2>v2.2.1 (September 14, 2017)<a class="headerlink" href="#v2-2-1-september-14-2017" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::module_::reload()</span></code> member function for reloading a module.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1040">#1040</a>.</p></li>
<li><p>Fixed a reference leak in the number converter.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1078">#1078</a>.</p></li>
<li><p>Fixed compilation with Clang on host GCC &lt; 5 (old libstdc++ which isn’t fully
C++11 compliant). <a class="reference external" href="https://github.com/pybind/pybind11/pull/1062">#1062</a>.</p></li>
<li><p>Fixed a regression where the automatic <code class="docutils literal notranslate"><span class="pre">std::vector&lt;bool&gt;</span></code> caster would
fail to compile. The same fix also applies to any container which returns
element proxies instead of references.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1053">#1053</a>.</p></li>
<li><p>Fixed a regression where the <code class="docutils literal notranslate"><span class="pre">py::keep_alive</span></code> policy could not be applied
to constructors. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1065">#1065</a>.</p></li>
<li><p>Fixed a nullptr dereference when loading a <code class="docutils literal notranslate"><span class="pre">py::module_local</span></code> type
that’s only registered in an external module.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1058">#1058</a>.</p></li>
<li><p>Fixed implicit conversion of accessors to types derived from <code class="docutils literal notranslate"><span class="pre">py::object</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1076">#1076</a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> in <code class="docutils literal notranslate"><span class="pre">PYBIND11_MODULE(name,</span> <span class="pre">variable)</span></code> can now be a macro.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1082">#1082</a>.</p></li>
<li><p>Relaxed overly strict <code class="docutils literal notranslate"><span class="pre">py::pickle()</span></code> check for matching get and set types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1064">#1064</a>.</p></li>
<li><p>Conversion errors now try to be more informative when it’s likely that
a missing header is the cause (e.g. forgetting <code class="docutils literal notranslate"><span class="pre">&lt;pybind11/stl.h&gt;</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1077">#1077</a>.</p></li>
</ul>
</section>
<section id="v2-2-0-august-31-2017">
<h2>v2.2.0 (August 31, 2017)<a class="headerlink" href="#v2-2-0-august-31-2017" title="Link to this heading"></a></h2>
<ul>
<li><p>Support for embedding the Python interpreter. See the
<span class="xref std std-doc">documentation page</span> for a
full overview of the new features.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/774">#774</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/889">#889</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/892">#892</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/920">#920</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pybind11/embed.h&gt;</span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">py</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">pybind11</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">py</span><span class="o">::</span><span class="n">scoped_interpreter</span><span class="w"> </span><span class="n">guard</span><span class="p">{};</span><span class="w"> </span><span class="c1">// start the interpreter and keep it alive</span>

<span class="w">    </span><span class="n">py</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// use the Python API</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Support for inheriting from multiple C++ bases in Python.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/693">#693</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cpp_module</span><span class="w"> </span><span class="kn">import</span> <span class="n">CppBase1</span><span class="p">,</span> <span class="n">CppBase2</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PyDerived</span><span class="p">(</span><span class="n">CppBase1</span><span class="p">,</span> <span class="n">CppBase2</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">CppBase1</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># C++ bases must be initialized explicitly</span>
        <span class="n">CppBase2</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBIND11_MODULE</span></code> is now the preferred way to create module entry points.
<code class="docutils literal notranslate"><span class="pre">PYBIND11_PLUGIN</span></code> is deprecated. See <a class="reference internal" href="reference.html#macros"><span class="std std-ref">Macros</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/879">#879</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// new</span>
<span class="n">PYBIND11_MODULE</span><span class="p">(</span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>

<span class="c1">// old</span>
<span class="n">PYBIND11_PLUGIN</span><span class="p">(</span><span class="n">example</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">py</span><span class="o">::</span><span class="k">module</span><span class="w"> </span><span class="n">m</span><span class="p">(</span><span class="s">&quot;example&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">ptr</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>pybind11’s headers and build system now more strictly enforce hidden symbol
visibility for extension modules. This should be seamless for most users,
but see the <a class="reference internal" href="upgrade.html"><span class="doc">Upgrade guide</span></a> if you use a custom build system.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/995">#995</a>.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">py::module_local</span></code> types which allow multiple modules to
export the same C++ types without conflicts. This is useful for opaque
types like <code class="docutils literal notranslate"><span class="pre">std::vector&lt;int&gt;</span></code>. <code class="docutils literal notranslate"><span class="pre">py::bind_vector</span></code> and <code class="docutils literal notranslate"><span class="pre">py::bind_map</span></code>
now default to <code class="docutils literal notranslate"><span class="pre">py::module_local</span></code> if their elements are builtins or
local types. See <a class="reference internal" href="advanced/classes.html#module-local"><span class="std std-ref">Module-local class bindings</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/949">#949</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/981">#981</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/995">#995</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/997">#997</a>.</p></li>
<li><p>Custom constructors can now be added very easily using lambdas or factory
functions which return a class instance by value, pointer or holder. This
supersedes the old placement-new <code class="docutils literal notranslate"><span class="pre">__init__</span></code> technique.
See <a class="reference internal" href="advanced/classes.html#custom-constructors"><span class="std std-ref">Custom constructors</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/805">#805</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1014">#1014</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Example</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">Example</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Example&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="n">py</span><span class="o">::</span><span class="n">init</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="c1">// existing constructor</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="n">py</span><span class="o">::</span><span class="n">init</span><span class="p">([](</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// custom constructor</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Example</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">n</span><span class="p">));</span>
<span class="w">    </span><span class="p">}));</span>
</pre></div>
</div>
</li>
<li><p>Similarly to custom constructors, pickling support functions are now bound
using the <code class="docutils literal notranslate"><span class="pre">py::pickle()</span></code> adaptor which improves type safety. See the
<a class="reference internal" href="upgrade.html"><span class="doc">Upgrade guide</span></a> and <a class="reference internal" href="advanced/classes.html#pickling"><span class="std std-ref">Pickling support</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1038">#1038</a>.</p></li>
<li><p>Builtin support for converting C++17 standard library types and general
conversion improvements:</p>
<ol class="arabic simple">
<li><p>C++17 <code class="docutils literal notranslate"><span class="pre">std::variant</span></code> is supported right out of the box. C++11/14
equivalents (e.g. <code class="docutils literal notranslate"><span class="pre">boost::variant</span></code>) can also be added with a simple
user-defined specialization. See <a class="reference internal" href="advanced/cast/stl.html#cpp17-container-casters"><span class="std std-ref">C++17 library containers</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/811">#811</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/845">#845</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/989">#989</a>.</p></li>
<li><p>Out-of-the-box support for C++17 <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/906">#906</a>.</p></li>
<li><p>Improved compatibility of the builtin <code class="docutils literal notranslate"><span class="pre">optional</span></code> converter.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/874">#874</a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">bool</span></code> converter now accepts <code class="docutils literal notranslate"><span class="pre">numpy.bool_</span></code> and types which
define <code class="docutils literal notranslate"><span class="pre">__bool__</span></code> (Python 3.x) or <code class="docutils literal notranslate"><span class="pre">__nonzero__</span></code> (Python 2.7).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/925">#925</a>.</p></li>
<li><p>C++-to-Python casters are now more efficient and move elements out
of rvalue containers whenever possible.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/851">#851</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/936">#936</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/938">#938</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">bytes</span></code> to <code class="docutils literal notranslate"><span class="pre">std::string/char*</span></code> conversion on Python 3.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/817">#817</a>.</p></li>
<li><p>Fixed lifetime of temporary C++ objects created in Python-to-C++ conversions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/924">#924</a>.</p></li>
</ol>
</li>
<li><p>Scope guard call policy for RAII types, e.g. <code class="docutils literal notranslate"><span class="pre">py::call_guard&lt;py::gil_scoped_release&gt;()</span></code>,
<code class="docutils literal notranslate"><span class="pre">py::call_guard&lt;py::scoped_ostream_redirect&gt;()</span></code>. See <a class="reference internal" href="advanced/functions.html#call-policies"><span class="std std-ref">Additional call policies</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/740">#740</a>.</p></li>
<li><p>Utility for redirecting C++ streams to Python (e.g. <code class="docutils literal notranslate"><span class="pre">std::cout</span></code> -&gt;
<code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>). Scope guard <code class="docutils literal notranslate"><span class="pre">py::scoped_ostream_redirect</span></code> in C++ and
a context manager in Python. See <a class="reference internal" href="advanced/pycpp/utilities.html#ostream-redirect"><span class="std std-ref">Capturing standard output from ostream</span></a>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1009">#1009</a>.</p></li>
<li><p>Improved handling of types and exceptions across module boundaries.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/915">#915</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/951">#951</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/995">#995</a>.</p></li>
<li><p>Fixed destruction order of <code class="docutils literal notranslate"><span class="pre">py::keep_alive</span></code> nurse/patient objects
in reference cycles.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/856">#856</a>.</p></li>
<li><p>NumPy and buffer protocol related improvements:</p>
<ol class="arabic simple">
<li><p>Support for negative strides in Python buffer objects/numpy arrays. This
required changing integers from unsigned to signed for the related C++ APIs.
Note: If you have compiler warnings enabled, you may notice some new conversion
warnings after upgrading. These can be resolved with <code class="docutils literal notranslate"><span class="pre">static_cast</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/782">#782</a>.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">std::complex</span></code> and arrays inside <code class="docutils literal notranslate"><span class="pre">PYBIND11_NUMPY_DTYPE</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/831">#831</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/832">#832</a>.</p></li>
<li><p>Support for constructing <code class="docutils literal notranslate"><span class="pre">py::buffer_info</span></code> and <code class="docutils literal notranslate"><span class="pre">py::arrays</span></code> using
arbitrary containers or iterators instead of requiring a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/788">#788</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/822">#822</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/860">#860</a>.</p></li>
<li><p>Explicitly check numpy version and require &gt;= 1.7.0.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/819">#819</a>.</p></li>
</ol>
</li>
<li><p>Support for allowing/prohibiting <code class="docutils literal notranslate"><span class="pre">None</span></code> for specific arguments and improved
<code class="docutils literal notranslate"><span class="pre">None</span></code> overload resolution order. See <a class="reference internal" href="advanced/functions.html#none-arguments"><span class="std std-ref">Allow/Prohibiting None arguments</span></a> for details.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/843">#843</a>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/859">#859</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::exec()</span></code> as a shortcut for <code class="docutils literal notranslate"><span class="pre">py::eval&lt;py::eval_statements&gt;()</span></code>
and support for C++11 raw string literals as input. See <a class="reference internal" href="advanced/pycpp/utilities.html#eval"><span class="std std-ref">Evaluating Python expressions from strings and files</span></a>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/766">#766</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/827">#827</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::vectorize()</span></code> ignores non-vectorizable arguments and supports
member functions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/762">#762</a>.</p></li>
<li><p>Support for bound methods as callbacks (<code class="docutils literal notranslate"><span class="pre">pybind11/functional.h</span></code>).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/815">#815</a>.</p></li>
<li><p>Allow aliasing pybind11 methods: <code class="docutils literal notranslate"><span class="pre">cls.attr(&quot;foo&quot;)</span> <span class="pre">=</span> <span class="pre">cls.attr(&quot;bar&quot;)</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/802">#802</a>.</p></li>
<li><p>Don’t allow mixed static/non-static overloads.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/804">#804</a>.</p></li>
<li><p>Fixed overriding static properties in derived classes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/784">#784</a>.</p></li>
<li><p>Added support for write only properties.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1144">#1144</a>.</p></li>
<li><p>Improved deduction of member functions of a derived class when its bases
aren’t registered with pybind11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/855">#855</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">Base</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Derived</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// Now works, but previously required also binding `Base`</span>
<span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Derived&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Derived</span><span class="o">::</span><span class="n">foo</span><span class="p">);</span><span class="w"> </span><span class="c1">// function is actually from `Base`</span>
</pre></div>
</div>
</li>
<li><p>The implementation of <code class="docutils literal notranslate"><span class="pre">py::init&lt;&gt;</span></code> now uses C++11 brace initialization
syntax to construct instances, which permits binding implicit constructors of
aggregate types. <a class="reference external" href="https://github.com/pybind/pybind11/pull/1015">#1015</a>.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">Aggregate</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">Aggregate</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Aggregate&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="n">py</span><span class="o">::</span><span class="n">init</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;&gt;</span><span class="p">());</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Fixed issues with multiple inheritance with offset base/derived pointers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/812">#812</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/866">#866</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/960">#960</a>.</p></li>
<li><p>Fixed reference leak of type objects.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1030">#1030</a>.</p></li>
<li><p>Improved support for the <code class="docutils literal notranslate"><span class="pre">/std:c++14</span></code> and <code class="docutils literal notranslate"><span class="pre">/std:c++latest</span></code> modes
on MSVC 2017.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/841">#841</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/999">#999</a>.</p></li>
<li><p>Fixed detection of private operator new on MSVC.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/893">#893</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/918">#918</a>.</p></li>
<li><p>Intel C++ compiler compatibility fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/937">#937</a>.</p></li>
<li><p>Fixed implicit conversion of <code class="docutils literal notranslate"><span class="pre">py::enum_</span></code> to integer types on Python 2.7.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/821">#821</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::hash</span></code> to fetch the hash value of Python objects, and
<code class="docutils literal notranslate"><span class="pre">.def(hash(py::self))</span></code> to provide the C++ <code class="docutils literal notranslate"><span class="pre">std::hash</span></code> as the Python
<code class="docutils literal notranslate"><span class="pre">__hash__</span></code> method.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1034">#1034</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">__truediv__</span></code> on Python 2 and <code class="docutils literal notranslate"><span class="pre">__itruediv__</span></code> on Python 3.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/867">#867</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::capsule</span></code> objects now support the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. This is useful
for interfacing with <code class="docutils literal notranslate"><span class="pre">scipy.LowLevelCallable</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/902">#902</a>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">py::make_iterator</span></code>’s <code class="docutils literal notranslate"><span class="pre">__next__()</span></code> for past-the-end calls.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/897">#897</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">error_already_set::matches()</span></code> for checking Python exceptions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/772">#772</a>.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">py::error_already_set::clear()</span></code>. It’s no longer needed
following a simplification of the <code class="docutils literal notranslate"><span class="pre">py::error_already_set</span></code> class.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/954">#954</a>.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">py::handle::operator==()</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">py::handle::is()</span></code>
<a class="reference external" href="https://github.com/pybind/pybind11/pull/825">#825</a>.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">py::object::borrowed</span></code>/<code class="docutils literal notranslate"><span class="pre">py::object::stolen</span></code>.
Use <code class="docutils literal notranslate"><span class="pre">py::object::borrowed_t{}</span></code>/<code class="docutils literal notranslate"><span class="pre">py::object::stolen_t{}</span></code> instead.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/771">#771</a>.</p></li>
<li><p>Changed internal data structure versioning to avoid conflicts between
modules compiled with different revisions of pybind11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1012">#1012</a>.</p></li>
<li><p>Additional compile-time and run-time error checking and more informative messages.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/786">#786</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/794">#794</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/803">#803</a>.</p></li>
<li><p>Various minor improvements and fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/764">#764</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/791">#791</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/795">#795</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/840">#840</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/844">#844</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/846">#846</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/849">#849</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/858">#858</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/862">#862</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/871">#871</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/872">#872</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/881">#881</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/888">#888</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/899">#899</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/928">#928</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/931">#931</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/944">#944</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/950">#950</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/952">#952</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/962">#962</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/965">#965</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/970">#970</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/978">#978</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/979">#979</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/986">#986</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1020">#1020</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1027">#1027</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/1037">#1037</a>.</p></li>
<li><p>Testing improvements.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/798">#798</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/882">#882</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/898">#898</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/900">#900</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/921">#921</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/923">#923</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/963">#963</a>.</p></li>
</ul>
</section>
<section id="v2-1-1-april-7-2017">
<h2>v2.1.1 (April 7, 2017)<a class="headerlink" href="#v2-1-1-april-7-2017" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed minimum version requirement for MSVC 2015u3
<a class="reference external" href="https://github.com/pybind/pybind11/pull/773">#773</a>.</p></li>
</ul>
</section>
<section id="v2-1-0-march-22-2017">
<h2>v2.1.0 (March 22, 2017)<a class="headerlink" href="#v2-1-0-march-22-2017" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>pybind11 now performs function overload resolution in two phases. The first
phase only considers exact type matches, while the second allows for implicit
conversions to take place. A special <code class="docutils literal notranslate"><span class="pre">noconvert()</span></code> syntax can be used to
completely disable implicit conversions for specific arguments.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/643">#643</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/634">#634</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/650">#650</a>.</p></li>
<li><p>Fixed a regression where static properties no longer worked with classes
using multiple inheritance. The <code class="docutils literal notranslate"><span class="pre">py::metaclass</span></code> attribute is no longer
necessary (and deprecated as of this release) when binding classes with
static properties.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/679">#679</a>,</p></li>
<li><p>Classes bound using <code class="docutils literal notranslate"><span class="pre">pybind11</span></code> can now use custom metaclasses.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/679">#679</a>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::args</span></code> and <code class="docutils literal notranslate"><span class="pre">py::kwargs</span></code> can now be mixed with other positional
arguments when binding functions using pybind11.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/611">#611</a>.</p></li>
<li><p>Improved support for C++11 unicode string and character types; added
extensive documentation regarding pybind11’s string conversion behavior.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/624">#624</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/636">#636</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/715">#715</a>.</p></li>
<li><p>pybind11 can now avoid expensive copies when converting Eigen arrays to NumPy
arrays (and vice versa). <a class="reference external" href="https://github.com/pybind/pybind11/pull/610">#610</a>.</p></li>
<li><p>The “fast path” in <code class="docutils literal notranslate"><span class="pre">py::vectorize</span></code> now works for any full-size group of C or
F-contiguous arrays. The non-fast path is also faster since it no longer performs
copies of the input arguments (except when type conversions are necessary).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/610">#610</a>.</p></li>
<li><p>Added fast, unchecked access to NumPy arrays via a proxy object.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/746">#746</a>.</p></li>
<li><p>Transparent support for class-specific <code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">new</span></code> and
<code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">delete</span></code> implementations.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/755">#755</a>.</p></li>
<li><p>Slimmer and more efficient STL-compatible iterator interface for sequence types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/662">#662</a>.</p></li>
<li><p>Improved custom holder type support.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/607">#607</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nullptr</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> conversion fixed in various builtin type casters.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/732">#732</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enum_</span></code> now exposes its members via a special <code class="docutils literal notranslate"><span class="pre">__members__</span></code> attribute.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/666">#666</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::vector</span></code> bindings created using <code class="docutils literal notranslate"><span class="pre">stl_bind.h</span></code> can now optionally
implement the buffer protocol. <a class="reference external" href="https://github.com/pybind/pybind11/pull/488">#488</a>.</p></li>
<li><p>Automated C++ reference documentation using doxygen and breathe.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/598">#598</a>.</p></li>
<li><p>Added minimum compiler version assertions.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/727">#727</a>.</p></li>
<li><p>Improved compatibility with C++1z.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/677">#677</a>.</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">py::capsule</span></code> API. Can be used to implement cleanup
callbacks that are involved at module destruction time.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/752">#752</a>.</p></li>
<li><p>Various minor improvements and fixes.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/595">#595</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/588">#588</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/589">#589</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/603">#603</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/619">#619</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/648">#648</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/695">#695</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/720">#720</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/723">#723</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/729">#729</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/724">#724</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/742">#742</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/753">#753</a>.</p></li>
</ul>
</section>
<section id="v2-0-1-jan-4-2017">
<h2>v2.0.1 (Jan 4, 2017)<a class="headerlink" href="#v2-0-1-jan-4-2017" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fix pointer to reference error in type_caster on MSVC
<a class="reference external" href="https://github.com/pybind/pybind11/pull/583">#583</a>.</p></li>
<li><p>Fixed a segmentation in the test suite due to a typo
<a class="reference external" href="https://github.com/pybind/pybind11/commit/cd7eac">cd7eac</a>.</p></li>
</ul>
</section>
<section id="v2-0-0-jan-1-2017">
<h2>v2.0.0 (Jan 1, 2017)<a class="headerlink" href="#v2-0-0-jan-1-2017" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed a reference counting regression affecting types with custom metaclasses
(introduced in v2.0.0-rc1).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/571">#571</a>.</p></li>
<li><p>Quenched a CMake policy warning.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/570">#570</a>.</p></li>
</ul>
</section>
<section id="v2-0-0-rc1-dec-23-2016">
<h2>v2.0.0-rc1 (Dec 23, 2016)<a class="headerlink" href="#v2-0-0-rc1-dec-23-2016" title="Link to this heading"></a></h2>
<p>The pybind11 developers are excited to issue a release candidate of pybind11
with a subsequent v2.0.0 release planned in early January next year.</p>
<p>An incredible amount of effort by went into pybind11 over the last ~5 months,
leading to a release that is jam-packed with exciting new features and numerous
usability improvements. The following list links PRs or individual commits
whenever applicable.</p>
<p>Happy Christmas!</p>
<ul>
<li><p>Support for binding C++ class hierarchies that make use of multiple
inheritance. <a class="reference external" href="https://github.com/pybind/pybind11/pull/410">#410</a>.</p></li>
<li><p>PyPy support: pybind11 now supports nightly builds of PyPy and will
interoperate with the future 5.7 release. No code changes are necessary,
everything “just” works as usual. Note that we only target the Python 2.7
branch for now; support for 3.x will be added once its <code class="docutils literal notranslate"><span class="pre">cpyext</span></code> extension
support catches up. A few minor features remain unsupported for the time
being (notably dynamic attributes in custom types).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/527">#527</a>.</p></li>
<li><p>Significant work on the documentation – in particular, the monolithic
<code class="docutils literal notranslate"><span class="pre">advanced.rst</span></code> file was restructured into a easier to read hierarchical
organization. <a class="reference external" href="https://github.com/pybind/pybind11/pull/448">#448</a>.</p></li>
<li><p>Many NumPy-related improvements:</p>
<ol class="arabic">
<li><p>Object-oriented API to access and modify NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> instances,
replicating much of the corresponding NumPy C API functionality.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/402">#402</a>.</p></li>
<li><p>NumPy array <code class="docutils literal notranslate"><span class="pre">dtype</span></code> array descriptors are now first-class citizens and
are exposed via a new class <code class="docutils literal notranslate"><span class="pre">py::dtype</span></code>.</p></li>
<li><p>Structured dtypes can be registered using the <code class="docutils literal notranslate"><span class="pre">PYBIND11_NUMPY_DTYPE()</span></code>
macro. Special <code class="docutils literal notranslate"><span class="pre">array</span></code> constructors accepting dtype objects were also
added.</p>
<p>One potential caveat involving this change: format descriptor strings
should now be accessed via <code class="docutils literal notranslate"><span class="pre">format_descriptor::format()</span></code> (however, for
compatibility purposes, the old syntax <code class="docutils literal notranslate"><span class="pre">format_descriptor::value</span></code> will
still work for non-structured data types). <a class="reference external" href="https://github.com/pybind/pybind11/pull/308">#308</a>.</p>
</li>
<li><p>Further improvements to support structured dtypes throughout the system.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/472">#472</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/474">#474</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/459">#459</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/453">#453</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/452">#452</a>, and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/505">#505</a>.</p></li>
<li><p>Fast access operators. <a class="reference external" href="https://github.com/pybind/pybind11/pull/497">#497</a>.</p></li>
<li><p>Constructors for arrays whose storage is owned by another object.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/440">#440</a>.</p></li>
<li><p>Added constructors for <code class="docutils literal notranslate"><span class="pre">array</span></code> and <code class="docutils literal notranslate"><span class="pre">array_t</span></code> explicitly accepting shape
and strides; if strides are not provided, they are deduced assuming
C-contiguity. Also added simplified constructors for 1-dimensional case.</p></li>
<li><p>Added buffer/NumPy support for <code class="docutils literal notranslate"><span class="pre">char[N]</span></code> and <code class="docutils literal notranslate"><span class="pre">std::array&lt;char,</span> <span class="pre">N&gt;</span></code> types.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">memoryview</span></code> wrapper type which is constructible from <code class="docutils literal notranslate"><span class="pre">buffer_info</span></code>.</p></li>
</ol>
</li>
<li><p>Eigen: many additional conversions and support for non-contiguous
arrays/slices.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/427">#427</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/315">#315</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/316">#316</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/312">#312</a>, and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/267">#267</a></p></li>
<li><p>Incompatible changes in <code class="docutils literal notranslate"><span class="pre">class_&lt;...&gt;::class_()</span></code>:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Declarations of types that provide access via the buffer protocol must
now include the <code class="docutils literal notranslate"><span class="pre">py::buffer_protocol()</span></code> annotation as an argument to
the <code class="docutils literal notranslate"><span class="pre">class_</span></code> constructor.</p></li>
<li><p>Declarations of types that require a custom metaclass (i.e. all classes
which include static properties via commands such as
<code class="docutils literal notranslate"><span class="pre">def_readwrite_static()</span></code>) must now include the <code class="docutils literal notranslate"><span class="pre">py::metaclass()</span></code>
annotation as an argument to the <code class="docutils literal notranslate"><span class="pre">class_</span></code> constructor.</p>
<p>These two changes were necessary to make type definitions in pybind11
future-proof, and to support PyPy via its cpyext mechanism. <a class="reference external" href="https://github.com/pybind/pybind11/pull/527">#527</a>.</p>
</li>
<li><p>This version of pybind11 uses a redesigned mechanism for instantiating
trampoline classes that are used to override virtual methods from within
Python. This led to the following user-visible syntax change: instead of</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">TrampolineClass</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;MyClass&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="n">alias</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">  </span><span class="p">....</span>
</pre></div>
</div>
<p>write</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="p">,</span><span class="w"> </span><span class="n">TrampolineClass</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;MyClass&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">....</span>
</pre></div>
</div>
<p>Importantly, both the original and the trampoline class are now
specified as an arguments (in arbitrary order) to the <code class="docutils literal notranslate"><span class="pre">py::class_</span></code>
template, and the <code class="docutils literal notranslate"><span class="pre">alias&lt;..&gt;()</span></code> call is gone. The new scheme has zero
overhead in cases when Python doesn’t override any functions of the
underlying C++ class. <a class="reference external" href="https://github.com/pybind/pybind11/commit/86d825">rev. 86d825</a>.</p>
</li>
</ol>
</div></blockquote>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">eval</span></code> and <code class="docutils literal notranslate"><span class="pre">eval_file</span></code> functions for evaluating expressions and
statements from a string or file. <a class="reference external" href="https://github.com/pybind/pybind11/commit/0d3fc3">rev. 0d3fc3</a>.</p></li>
<li><p>pybind11 can now create types with a modifiable dictionary.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/437">#437</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/444">#444</a>.</p></li>
<li><p>Support for translation of arbitrary C++ exceptions to Python counterparts.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/296">#296</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/273">#273</a>.</p></li>
<li><p>Report full backtraces through mixed C++/Python code, better reporting for
import errors, fixed GIL management in exception processing.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/537">#537</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/494">#494</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/commit/e72d95">rev. e72d95</a>, and
<a class="reference external" href="https://github.com/pybind/pybind11/commit/099d6e">rev. 099d6e</a>.</p></li>
<li><p>Support for bit-level operations, comparisons, and serialization of C++
enumerations. <a class="reference external" href="https://github.com/pybind/pybind11/pull/503">#503</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/508">#508</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/380">#380</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/309">#309</a>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/311">#311</a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">class_</span></code> constructor now accepts its template arguments in any order.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/385">#385</a>.</p></li>
<li><p>Attribute and item accessors now have a more complete interface which makes
it possible to chain attributes as in
<code class="docutils literal notranslate"><span class="pre">obj.attr(&quot;a&quot;)[key].attr(&quot;b&quot;).attr(&quot;method&quot;)(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/425">#425</a>.</p></li>
<li><p>Major redesign of the default and conversion constructors in <code class="docutils literal notranslate"><span class="pre">pytypes.h</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/464">#464</a>.</p></li>
<li><p>Added built-in support for <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code> holder type. It is no longer
necessary to to include a declaration of the form
<code class="docutils literal notranslate"><span class="pre">PYBIND11_DECLARE_HOLDER_TYPE(T,</span> <span class="pre">std::shared_ptr&lt;T&gt;)</span></code> (though continuing to
do so won’t cause an error).
<a class="reference external" href="https://github.com/pybind/pybind11/pull/454">#454</a>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">py::overload_cast</span></code> casting operator to select among multiple possible
overloads of a function. An example:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">Pet</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pet&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;set&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">py</span><span class="o">::</span><span class="n">overload_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Pet</span><span class="o">::</span><span class="n">set</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Set the pet&#39;s age&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;set&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">py</span><span class="o">::</span><span class="n">overload_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Pet</span><span class="o">::</span><span class="n">set</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Set the pet&#39;s name&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>This feature only works on C++14-capable compilers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/541">#541</a>.</p>
</li>
<li><p>C++ types are automatically cast to Python types, e.g. when assigning
them as an attribute. For instance, the following is now legal:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">::</span><span class="k">module</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* ... */</span>
<span class="n">m</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">&quot;constant&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>(Previously, a <code class="docutils literal notranslate"><span class="pre">py::cast</span></code> call was necessary to avoid a compilation error.)
<a class="reference external" href="https://github.com/pybind/pybind11/pull/551">#551</a>.</p>
</li>
<li><p>Redesigned <code class="docutils literal notranslate"><span class="pre">pytest</span></code>-based test suite. <a class="reference external" href="https://github.com/pybind/pybind11/pull/321">#321</a>.</p></li>
<li><p>Instance tracking to detect reference leaks in test suite. <a class="reference external" href="https://github.com/pybind/pybind11/pull/324">#324</a></p></li>
<li><p>pybind11 can now distinguish between multiple different instances that are
located at the same memory address, but which have different types.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/329">#329</a>.</p></li>
<li><p>Improved logic in <code class="docutils literal notranslate"><span class="pre">move</span></code> return value policy.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/510">#510</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/297">#297</a>.</p></li>
<li><p>Generalized unpacking API to permit calling Python functions from C++ using
notation such as <code class="docutils literal notranslate"><span class="pre">foo(a1,</span> <span class="pre">a2,</span> <span class="pre">*args,</span> <span class="pre">&quot;ka&quot;_a=1,</span> <span class="pre">&quot;kb&quot;_a=2,</span> <span class="pre">**kwargs)</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/372">#372</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py::print()</span></code> function whose behavior matches that of the native Python
<code class="docutils literal notranslate"><span class="pre">print()</span></code> function. <a class="reference external" href="https://github.com/pybind/pybind11/pull/372">#372</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::dict</span></code> keyword constructor:<code class="docutils literal notranslate"><span class="pre">auto</span> <span class="pre">d</span> <span class="pre">=</span> <span class="pre">dict(&quot;number&quot;_a=42,</span>
<span class="pre">&quot;name&quot;_a=&quot;World&quot;);</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/372">#372</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::str::format()</span></code> method and <code class="docutils literal notranslate"><span class="pre">_s</span></code> literal: <code class="docutils literal notranslate"><span class="pre">py::str</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">&quot;1</span> <span class="pre">+</span> <span class="pre">2</span>
<span class="pre">=</span> <span class="pre">{}&quot;_s.format(3);</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/372">#372</a>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">py::repr()</span></code> function which is equivalent to Python’s builtin
<code class="docutils literal notranslate"><span class="pre">repr()</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/333">#333</a>.</p></li>
<li><p>Improved construction and destruction logic for holder types. It is now
possible to reference instances with smart pointer holder types without
constructing the holder if desired. The <code class="docutils literal notranslate"><span class="pre">PYBIND11_DECLARE_HOLDER_TYPE</span></code>
macro now accepts an optional second parameter to indicate whether the holder
type uses intrusive reference counting.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/533">#533</a> and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/561">#561</a>.</p></li>
<li><p>Mapping a stateless C++ function to Python and back is now “for free” (i.e.
no extra indirections or argument conversion overheads). <a class="reference external" href="https://github.com/pybind/pybind11/commit/954b79">rev. 954b79</a>.</p></li>
<li><p>Bindings for <code class="docutils literal notranslate"><span class="pre">std::valarray&lt;T&gt;</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/545">#545</a>.</p></li>
<li><p>Improved support for C++17 capable compilers.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/562">#562</a>.</p></li>
<li><p>Bindings for <code class="docutils literal notranslate"><span class="pre">std::optional&lt;t&gt;</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/475">#475</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/476">#476</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/479">#479</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/499">#499</a>, and
<a class="reference external" href="https://github.com/pybind/pybind11/pull/501">#501</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stl_bind.h</span></code>: general improvements and support for <code class="docutils literal notranslate"><span class="pre">std::map</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/490">#490</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/282">#282</a>,
<a class="reference external" href="https://github.com/pybind/pybind11/pull/235">#235</a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">std::pair</span></code>, <code class="docutils literal notranslate"><span class="pre">std::list</span></code>, and <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> type
casters now accept any Python sequence type as input. <a class="reference external" href="https://github.com/pybind/pybind11/commit/107285">rev. 107285</a>.</p></li>
<li><p>Improved CMake Python detection on multi-architecture Linux.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/532">#532</a>.</p></li>
<li><p>Infrastructure to selectively disable or enable parts of the automatically
generated docstrings. <a class="reference external" href="https://github.com/pybind/pybind11/pull/486">#486</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference</span></code> and <code class="docutils literal notranslate"><span class="pre">reference_internal</span></code> are now the default return value
properties for static and non-static properties, respectively. <a class="reference external" href="https://github.com/pybind/pybind11/pull/473">#473</a>. (the previous defaults
were <code class="docutils literal notranslate"><span class="pre">automatic</span></code>). <a class="reference external" href="https://github.com/pybind/pybind11/pull/473">#473</a>.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> with non-default deleters or no deleter at
all (<code class="docutils literal notranslate"><span class="pre">py::nodelete</span></code>). <a class="reference external" href="https://github.com/pybind/pybind11/pull/384">#384</a>.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">handle::call()</span></code> method. The new syntax to call Python
functions is simply <code class="docutils literal notranslate"><span class="pre">handle()</span></code>. It can also be invoked explicitly via
<code class="docutils literal notranslate"><span class="pre">handle::operator&lt;X&gt;()</span></code>, where <code class="docutils literal notranslate"><span class="pre">X</span></code> is an optional return value policy.</p></li>
<li><p>Print more informative error messages when <code class="docutils literal notranslate"><span class="pre">make_tuple()</span></code> or <code class="docutils literal notranslate"><span class="pre">cast()</span></code>
fail. <a class="reference external" href="https://github.com/pybind/pybind11/pull/262">#262</a>.</p></li>
<li><p>Creation of holder types for classes deriving from
<code class="docutils literal notranslate"><span class="pre">std::enable_shared_from_this&lt;&gt;</span></code> now also works for <code class="docutils literal notranslate"><span class="pre">const</span></code> values.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/260">#260</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_iterator()</span></code> improvements for better compatibility with various
types (now uses prefix increment operator); it now also accepts iterators
with different begin/end types as long as they are equality comparable.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/247">#247</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg()</span></code> now accepts a wider range of argument types for default values.
<a class="reference external" href="https://github.com/pybind/pybind11/pull/244">#244</a>.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">keep_alive</span></code> where the nurse object may be <code class="docutils literal notranslate"><span class="pre">None</span></code>. <a class="reference external" href="https://github.com/pybind/pybind11/pull/341">#341</a>.</p></li>
<li><p>Added constructors for <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> from zero-terminated char
pointers, and from char pointers and length. Added constructors for <code class="docutils literal notranslate"><span class="pre">str</span></code>
from <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and for <code class="docutils literal notranslate"><span class="pre">bytes</span></code> from <code class="docutils literal notranslate"><span class="pre">str</span></code>, which will perform UTF-8
decoding/encoding as required.</p></li>
<li><p>Many other improvements of library internals without user-visible changes</p></li>
</ul>
</section>
<section id="july-12-2016">
<h2>1.8.1 (July 12, 2016)<a class="headerlink" href="#july-12-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed a rare but potentially very severe issue when the garbage collector ran
during pybind11 type creation.</p></li>
</ul>
</section>
<section id="june-14-2016">
<h2>1.8.0 (June 14, 2016)<a class="headerlink" href="#june-14-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Redesigned CMake build system which exports a convenient
<code class="docutils literal notranslate"><span class="pre">pybind11_add_module</span></code> function to parent projects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;&gt;</span></code> type bindings analogous to Boost.Python’s <code class="docutils literal notranslate"><span class="pre">indexing_suite</span></code></p></li>
<li><p>Transparent conversion of sparse and dense Eigen matrices and vectors (<code class="docutils literal notranslate"><span class="pre">eigen.h</span></code>)</p></li>
<li><p>Added an <code class="docutils literal notranslate"><span class="pre">ExtraFlags</span></code> template argument to the NumPy <code class="docutils literal notranslate"><span class="pre">array_t&lt;&gt;</span></code> wrapper
to disable an enforced cast that may lose precision, e.g. to create overloads
for different precisions and complex vs real-valued matrices.</p></li>
<li><p>Prevent implicit conversion of floating point values to integral types in
function arguments</p></li>
<li><p>Fixed incorrect default return value policy for functions returning a shared
pointer</p></li>
<li><p>Don’t allow registering a type via <code class="docutils literal notranslate"><span class="pre">class_</span></code> twice</p></li>
<li><p>Don’t allow casting a <code class="docutils literal notranslate"><span class="pre">None</span></code> value into a C++ lvalue reference</p></li>
<li><p>Fixed a crash in <code class="docutils literal notranslate"><span class="pre">enum_::operator==</span></code> that was triggered by the <code class="docutils literal notranslate"><span class="pre">help()</span></code> command</p></li>
<li><p>Improved detection of whether or not custom C++ types can be copy/move-constructed</p></li>
<li><p>Extended <code class="docutils literal notranslate"><span class="pre">str</span></code> type to also work with <code class="docutils literal notranslate"><span class="pre">bytes</span></code> instances</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;_a</span></code> user defined string literal that is equivalent to <code class="docutils literal notranslate"><span class="pre">py::arg(&quot;name&quot;)</span></code>.</p></li>
<li><p>When specifying function arguments via <code class="docutils literal notranslate"><span class="pre">py::arg</span></code>, the test that verifies
the number of arguments now runs at compile time.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">[[noreturn]]</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">pybind11_fail()</span></code> to quench some
compiler warnings</p></li>
<li><p>List function arguments in exception text when the dispatch code cannot find
a matching overload</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">PYBIND11_OVERLOAD_NAME</span></code> and <code class="docutils literal notranslate"><span class="pre">PYBIND11_OVERLOAD_PURE_NAME</span></code> macros which
can be used to override virtual methods whose name differs in C++ and Python
(e.g. <code class="docutils literal notranslate"><span class="pre">__call__</span></code> and <code class="docutils literal notranslate"><span class="pre">operator()</span></code>)</p></li>
<li><p>Various minor <code class="docutils literal notranslate"><span class="pre">iterator</span></code> and <code class="docutils literal notranslate"><span class="pre">make_iterator()</span></code> improvements</p></li>
<li><p>Transparently support <code class="docutils literal notranslate"><span class="pre">__bool__</span></code> on Python 2.x and Python 3.x</p></li>
<li><p>Fixed issue with destructor of unpickled object not being called</p></li>
<li><p>Minor CMake build system improvements on Windows</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pybind11::args</span></code> and <code class="docutils literal notranslate"><span class="pre">pybind11::kwargs</span></code> types to create functions which
take an arbitrary number of arguments and keyword arguments</p></li>
<li><p>New syntax to call a Python function from C++ using <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">*kwargs</span></code></p></li>
<li><p>The functions <code class="docutils literal notranslate"><span class="pre">def_property_*</span></code> now correctly process docstring arguments (these
formerly caused a segmentation fault)</p></li>
<li><p>Many <code class="docutils literal notranslate"><span class="pre">mkdoc.py</span></code> improvements (enumerations, template arguments, <code class="docutils literal notranslate"><span class="pre">DOC()</span></code>
macro accepts more arguments)</p></li>
<li><p>Cygwin support</p></li>
<li><p>Documentation improvements (pickling support, <code class="docutils literal notranslate"><span class="pre">keep_alive</span></code>, macro usage)</p></li>
</ul>
</section>
<section id="april-30-2016">
<h2>1.7 (April 30, 2016)<a class="headerlink" href="#april-30-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">move</span></code> return value policy that triggers C++11 move semantics.
The automatic return value policy falls back to this case whenever a rvalue
reference is encountered</p></li>
<li><p>Significantly more general GIL state routines that are used instead of
Python’s troublesome <code class="docutils literal notranslate"><span class="pre">PyGILState_Ensure</span></code> and <code class="docutils literal notranslate"><span class="pre">PyGILState_Release</span></code> API</p></li>
<li><p>Redesign of opaque types that drastically simplifies their usage</p></li>
<li><p>Extended ability to pass values of type <code class="docutils literal notranslate"><span class="pre">[const]</span> <span class="pre">void</span> <span class="pre">*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keep_alive</span></code> fix: don’t fail when there is no patient</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">functional.h</span></code>: acquire the GIL before calling a Python function</p></li>
<li><p>Added Python RAII type wrappers <code class="docutils literal notranslate"><span class="pre">none</span></code> and <code class="docutils literal notranslate"><span class="pre">iterable</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">*kwargs</span></code> pass-through parameters to
<code class="docutils literal notranslate"><span class="pre">pybind11.get_include()</span></code> function</p></li>
<li><p>Iterator improvements and fixes</p></li>
<li><p>Documentation on return value policies and opaque types improved</p></li>
</ul>
</section>
<section id="id785">
<h2>1.6 (April 30, 2016)<a class="headerlink" href="#id785" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Skipped due to upload to PyPI gone wrong and inability to recover
(<a class="reference external" href="https://github.com/pypa/packaging-problems/issues/74">https://github.com/pypa/packaging-problems/issues/74</a>)</p></li>
</ul>
</section>
<section id="april-21-2016">
<h2>1.5 (April 21, 2016)<a class="headerlink" href="#april-21-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>For polymorphic types, use RTTI to try to return the closest type registered with pybind11</p></li>
<li><p>Pickling support for serializing and unserializing C++ instances to a byte stream in Python</p></li>
<li><p>Added a convenience routine <code class="docutils literal notranslate"><span class="pre">make_iterator()</span></code> which turns a range indicated
by a pair of C++ iterators into a iterable Python object</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">len()</span></code> and a variadic <code class="docutils literal notranslate"><span class="pre">make_tuple()</span></code> function</p></li>
<li><p>Addressed a rare issue that could confuse the current virtual function
dispatcher and another that could lead to crashes in multi-threaded
applications</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">get_include()</span></code> function to the Python module that returns the path
of the directory containing the installed pybind11 header files</p></li>
<li><p>Documentation improvements: import issues, symbol visibility, pickling, limitations</p></li>
<li><p>Added casting support for <code class="docutils literal notranslate"><span class="pre">std::reference_wrapper&lt;&gt;</span></code></p></li>
</ul>
</section>
<section id="april-7-2016">
<h2>1.4 (April 7, 2016)<a class="headerlink" href="#april-7-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Transparent type conversion for <code class="docutils literal notranslate"><span class="pre">std::wstring</span></code> and <code class="docutils literal notranslate"><span class="pre">wchar_t</span></code></p></li>
<li><p>Allow passing <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>-valued strings</p></li>
<li><p>Transparent passing of <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code> pointers using capsules</p></li>
<li><p>Transparent support for returning values wrapped in <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;&gt;</span></code></p></li>
<li><p>Improved docstring generation for compatibility with Sphinx</p></li>
<li><p>Nicer debug error message when default parameter construction fails</p></li>
<li><p>Support for “opaque” types that bypass the transparent conversion layer for STL containers</p></li>
<li><p>Redesigned type casting interface to avoid ambiguities that could occasionally cause compiler errors</p></li>
<li><p>Redesigned property implementation; fixes crashes due to an unfortunate default return value policy</p></li>
<li><p>Anaconda package generation support</p></li>
</ul>
</section>
<section id="march-8-2016">
<h2>1.3 (March 8, 2016)<a class="headerlink" href="#march-8-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Added support for the Intel C++ compiler (v15+)</p></li>
<li><p>Added support for the STL unordered set/map data structures</p></li>
<li><p>Added support for the STL linked list data structure</p></li>
<li><p>NumPy-style broadcasting support in <code class="docutils literal notranslate"><span class="pre">pybind11::vectorize</span></code></p></li>
<li><p>pybind11 now displays more verbose error messages when <code class="docutils literal notranslate"><span class="pre">arg::operator=()</span></code> fails</p></li>
<li><p>pybind11 internal data structures now live in a version-dependent namespace to avoid ABI issues</p></li>
<li><p>Many, many bugfixes involving corner cases and advanced usage</p></li>
</ul>
</section>
<section id="february-7-2016">
<h2>1.2 (February 7, 2016)<a class="headerlink" href="#february-7-2016" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Optional: efficient generation of function signatures at compile time using C++14</p></li>
<li><p>Switched to a simpler and more general way of dealing with function default
arguments. Unused keyword arguments in function calls are now detected and
cause errors as expected</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">keep_alive</span></code> call policy analogous to Boost.Python’s <code class="docutils literal notranslate"><span class="pre">with_custodian_and_ward</span></code></p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pybind11::base&lt;&gt;</span></code> attribute to indicate a subclass relationship</p></li>
<li><p>Improved interface for RAII type wrappers in <code class="docutils literal notranslate"><span class="pre">pytypes.h</span></code></p></li>
<li><p>Use RAII type wrappers consistently within pybind11 itself. This
fixes various potential refcount leaks when exceptions occur</p></li>
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">bytes</span></code> RAII type wrapper (maps to <code class="docutils literal notranslate"><span class="pre">string</span></code> in Python 2.7)</p></li>
<li><p>Made handle and related RAII classes const correct, using them more
consistently everywhere now</p></li>
<li><p>Got rid of the ugly <code class="docutils literal notranslate"><span class="pre">__pybind11__</span></code> attributes on the Python side—they are
now stored in a C++ hash table that is not visible in Python</p></li>
<li><p>Fixed refcount leaks involving NumPy arrays and bound functions</p></li>
<li><p>Vastly improved handling of shared/smart pointers</p></li>
<li><p>Removed an unnecessary copy operation in <code class="docutils literal notranslate"><span class="pre">pybind11::vectorize</span></code></p></li>
<li><p>Fixed naming clashes when both pybind11 and NumPy headers are included</p></li>
<li><p>Added conversions for additional exception types</p></li>
<li><p>Documentation improvements (using multiple extension modules, smart pointers,
other minor clarifications)</p></li>
<li><p>unified infrastructure for parsing variadic arguments in <code class="docutils literal notranslate"><span class="pre">class_</span></code> and cpp_function</p></li>
<li><p>Fixed license text (was: ZLIB, should have been: 3-clause BSD)</p></li>
<li><p>Python 3.2 compatibility</p></li>
<li><p>Fixed remaining issues when accessing types in another plugin module</p></li>
<li><p>Added enum comparison and casting methods</p></li>
<li><p>Improved SFINAE-based detection of whether types are copy-constructible</p></li>
<li><p>Eliminated many warnings about unused variables and the use of <code class="docutils literal notranslate"><span class="pre">offsetof()</span></code></p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">std::array&lt;&gt;</span></code> conversions</p></li>
</ul>
</section>
<section id="december-7-2015">
<h2>1.1 (December 7, 2015)<a class="headerlink" href="#december-7-2015" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Documentation improvements (GIL, wrapping functions, casting, fixed many typos)</p></li>
<li><p>Generalized conversion of integer types</p></li>
<li><p>Improved support for casting function objects</p></li>
<li><p>Improved support for <code class="docutils literal notranslate"><span class="pre">std::shared_ptr&lt;&gt;</span></code> conversions</p></li>
<li><p>Initial support for <code class="docutils literal notranslate"><span class="pre">std::set&lt;&gt;</span></code> conversions</p></li>
<li><p>Fixed type resolution issue for types defined in a separate plugin module</p></li>
<li><p>CMake build system improvements</p></li>
<li><p>Factored out generic functionality to non-templated code (smaller code size)</p></li>
<li><p>Added a code size / compile time benchmark vs Boost.Python</p></li>
<li><p>Added an appveyor CI script</p></li>
</ul>
</section>
<section id="october-15-2015">
<h2>1.0 (October 15, 2015)<a class="headerlink" href="#october-15-2015" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Initial release</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2025, EXP-code collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>