<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to configure a razor-thin disk &mdash; EXP 0.172 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=9c6809b7"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Debugging EXP" href="debug.html" />
    <link rel="prev" title="How the EXP N-body code selects what and when to write data" href="EXP-output.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EXP
              <img src="../_static/exp_logo_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                7.x
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html">EXP at a glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXP concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bfetheory.html">BFE theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeintro.html">Code intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="timesseries.html">BFE time series analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units in EXP and pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="multistep.html">N-Body optimization in EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="centering.html">Centering</a></li>
<li class="toctree-l1"><a class="reference internal" href="yamlconfig.html">What is YAML?</a></li>
<li class="toctree-l1"><a class="reference internal" href="yamlconfig.html#an-annotated-exp-yaml-configuration">An annotated EXP YAML configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="howtosim.html">How to run your own N-body simulation in EXP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions (FAQ)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Are there pre-compiled versions of pyEXP and EXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#i-only-want-pyexp-do-i-need-c-to-compile-exp">I only want pyEXP, do I need C++ to compile EXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#why-would-i-use-exp-rather-than-pyexp">Why would I use EXP rather than pyEXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#what-hardware-do-i-need-to-run-exp-and-pyexp">What hardware do I need to run EXP and pyEXP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#how-do-i-restart-exp-from-a-checkpoint">How do I restart EXP from a checkpoint?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#my-hpc-cluster-does-not-have-the-required-dependencies-what-are-my-options">My HPC cluster does not have the required dependencies.  What are my options?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#can-i-run-exp-or-pyexp-in-a-container">Can I run EXP or pyEXP in a container?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#i-got-a-seg-fault-now-what-do-i-do">I got a “seg fault”, now what do I do?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#how-can-i-do-a-calculation-with-phase-space-in-pyexp">How can I do a calculation with phase space in pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html#what-do-these-parameters-mean">What do these parameters mean?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to solve specific problems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="visualizing-bases.html">How to visualize the BFE bases used to make your coefficients</a></li>
<li class="toctree-l1"><a class="reference internal" href="making-coefficients.html">How to  generate coefficients from phase-space snapshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="saving-coefficients.html">How to save and reuse your newly generated coefficients</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizing-fields.html">How to convert your coefficients back to physical fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="make-movies.html">Making movies of your BFE field quantities</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-mssa.html">How to use mSSA with your coefficient series in pyEXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="orbits.html">Generating orbits in your BFE potential fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="replay.html">Replaying a simulation using EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="exp-phase-space.html">The EXP phase-space format</a></li>
<li class="toctree-l1"><a class="reference internal" href="EXP-output.html">How the EXP N-body code selects what and when to write data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to configure a razor-thin disk</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-complete-example">A complete example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#target-densities-and-their-parameters">Target densities and their parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exponential-disk">Exponential disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kuzmin-disk">Kuzmin disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mestel-disk">Mestel disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zang-disk">Zang disk</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging EXP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending EXP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Software design goals and features</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#overall-organization-of-the-code">Overall organization of the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#parallel-usage">Parallel usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="usermodules.html">User modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="newforces.html">How to make a new EXP force</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More about EXP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to EXP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Index to C++ classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pybind11.html">Index to pyEXP classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning and API stability</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EXP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to configure a razor-thin disk</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/topics/flatdisk.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-configure-a-razor-thin-disk">
<span id="flatdisk-config"></span><h1>How to configure a razor-thin disk<a class="headerlink" href="#how-to-configure-a-razor-thin-disk" title="Link to this heading"></a></h1>
<p id="index-0">This stanza defines the phase-space components with associated
parameters and force methods as a list.  Each list element starts with
‘-’ and has four fields:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key word</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>the mnemonic name for the component</p></td>
</tr>
<tr class="row-odd"><td><p>parameters</p></td>
<td><p>a list of key: value pairs</p></td>
</tr>
<tr class="row-even"><td><p>bodyfile</p></td>
<td><p>the name of the ascii phase-space file to initialize this component</p></td>
</tr>
<tr class="row-odd"><td><p>force</p></td>
<td><p>the method for computing the potential and acceleration</p></td>
</tr>
</tbody>
</table>
<p>The mnemonic name may contain spaces.  The body file is in EXP native
formation.  EXP has its own hierarchical phase space structure that we
call <a class="reference internal" href="exp-phase-space.html#exp-phase-space"><span class="std std-ref">PSP</span></a>.  EXP provides a number of
standalone routines to manipulate, visualize and summarize the content
of PSP files.  EXP uses the list index internally to describe the
component. However, there is support for reflection by mnemonic name.</p>
<section id="a-complete-example">
<h2>A complete example<a class="headerlink" href="#a-complete-example" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">FlatDisk</span></code> uses the empirical orthogonal function method (EOF)
described in <a class="reference internal" href="bfetheory.html#twodcyl"><span class="std std-ref">Two-dimensional cylindrical bases</span></a> to find potential-density pairs that best
fit a target disk density.  This method also computes the potential
and force above and below the disk plane for coupling to
three-dimensional components. The desired target model is specified in
the YAML configuration in the <cite>force</cite> field stanza.  A typical force
configuration for a razor-thin exponential disk might be:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">force</span><span class="w">        </span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="nt">id         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flatdisk</span>
<span class="w">  </span><span class="nt">parameters </span><span class="p">:</span>
<span class="w">    </span><span class="nt">diskconf   </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">expon</span><span class="p p-Indicator">,</span><span class="nt"> parameters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">acyl</span><span class="p">:</span><span class="w"> </span><span class="nv">0.01</span><span class="p p-Indicator">}}</span>
<span class="w">    </span><span class="nt">nmaxfid    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">    </span><span class="nt">rcylmin    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">    </span><span class="nt">rcylmax    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">    </span><span class="nt">numx       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">256</span>
<span class="w">    </span><span class="nt">numy       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">128</span>
<span class="w">    </span><span class="nt">scale      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">    </span><span class="nt">knots      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span>
<span class="w">    </span><span class="nt">Mmax       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<span class="w">    </span><span class="nt">nmax       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12</span>
<span class="w">    </span><span class="nt">logr       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">self_consistent </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Some explanation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> is a mnemonic name for the force, <cite>flatdisk</cite> in this case</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parameters</span></code> is a list of key-value pairs that define the force</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">diskconf</span></code> defines the target density for basis construction.
Here we are using an exponential disk with with a scale length,
<code class="docutils literal notranslate"><span class="pre">acyl</span></code> of 0.01</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nmaxfid</span></code> is the maximum Bessel function degree for the Bessel
function Gram matrix used to construct the EOF basis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rcylmin</span></code> and <code class="docutils literal notranslate"><span class="pre">rcylmax</span></code> define the minimum and maximum radius,
respectively, of the table of potential-density pairs in units where
the disk scale is unity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale</span></code> maps the cylindrical coordinates to the disk basis.
Choosing this to be the same or similar to the <code class="docutils literal notranslate"><span class="pre">acyl</span></code> parameter is
a good choice in this calse</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numx</span></code> and <code class="docutils literal notranslate"><span class="pre">numy</span></code> are the number of grid points in the x and z
directions, respectively, for the tabulation of the potential and
force functions in the meridional plane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">knots</span></code> is the number of quadrature knots used to compute the
inner products in the Gram matrix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mmax</span></code> and <code class="docutils literal notranslate"><span class="pre">nmax</span></code> are the maximum azimuthal degree and radial
order, respectively, for the new basis functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logr</span></code> is a boolean that indicates whether the radial grid is
linear or logarithmic</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self_consistent</span></code> is a boolean that indicates whether the
force field is computed from the particle distribution at every time
step or fixed to the initial distribution</p></li>
</ul>
<p>Please note that many of these parameters have sensible defaults and
can be left out of the configuration.  They are included here as an
example.  By default, <cite>FlatDisk</cite> uses Bessel functions to construct
the full three-dimensional fields from the flat-disk density using the
Hankel transform (see <a class="reference internal" href="bfetheory.html#twodcyl"><span class="std std-ref">Two-dimensional cylindrical bases</span></a>).  This method is very accurate
when the initial basis set itself are proportional to Bessel functions
and that is the default.  However, the initial basis may use the
Clutton-Brock two-dimensional basis set, optionally.  This is
experimental and requires recompiling the code.  Ask for help if you
want to consider this.</p>
</section>
<section id="target-densities-and-their-parameters">
<h2>Target densities and their parameters<a class="headerlink" href="#target-densities-and-their-parameters" title="Link to this heading"></a></h2>
<section id="exponential-disk">
<h3>Exponential disk<a class="headerlink" href="#exponential-disk" title="Link to this heading"></a></h3>
<p>Name: <code class="docutils literal notranslate"><span class="pre">expon</span></code></p>
<p>Parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key word</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>acyl</p></td>
<td><p>scale length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="kuzmin-disk">
<h3>Kuzmin disk<a class="headerlink" href="#kuzmin-disk" title="Link to this heading"></a></h3>
<p>Name: <code class="docutils literal notranslate"><span class="pre">kuzmin</span></code></p>
<p>Parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key word</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>acyl</p></td>
<td><p>scale length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mestel-disk">
<h3>Mestel disk<a class="headerlink" href="#mestel-disk" title="Link to this heading"></a></h3>
<p>Name: <code class="docutils literal notranslate"><span class="pre">mestel</span></code></p>
<p>Parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key word</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vrot</p></td>
<td><p>rotation speed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="zang-disk">
<h3>Zang disk<a class="headerlink" href="#zang-disk" title="Link to this heading"></a></h3>
<p>Also known as the doubly tapered Mestel disk</p>
<p>Name: <code class="docutils literal notranslate"><span class="pre">zang</span></code></p>
<p>Parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key word</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vrot</p></td>
<td><p>rotation speed</p></td>
</tr>
<tr class="row-odd"><td><p>Ninner</p></td>
<td><p>inner taper exponent</p></td>
</tr>
<tr class="row-even"><td><p>Mouter</p></td>
<td><p>outer taper exponent</p></td>
</tr>
<tr class="row-odd"><td><p>Ri</p></td>
<td><p>inner taper radius</p></td>
</tr>
<tr class="row-even"><td><p>Ro</p></td>
<td><p>outer taper radius</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="EXP-output.html" class="btn btn-neutral float-left" title="How the EXP N-body code selects what and when to write data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="debug.html" class="btn btn-neutral float-right" title="Debugging EXP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2025, EXP-code collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>